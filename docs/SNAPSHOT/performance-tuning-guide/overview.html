
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Overview of GlassFish Server Performance Tuning</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
<table id="doc-title" cellspacing="0" cellpadding="0">
  <tr>
  <td align="left" valign="top">
  <b>Overview of GlassFish Server Performance Tuning</b><br />
      <p class="beta">DRAFT</p>
  </td>
  </tr>
</table>
<hr />

<table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
	<colgroup>
		<col width="12%"/>
		<col width="12%"/>
		<col width="*"/>
	</colgroup>
	<tr>
		<td align="left">
		<a href="preface.html">
			<span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Previous</span>
		</a>
		</td>

		<td align="left">
		<a href="tuning-apps.html">
			<span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Next</span>
		</a>
		</td>

		<td align="right">
		<a href="toc.html">
			<span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Contents</span>
		</a>
		</td>
	</tr>
</table>


<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a id="GSPTG00003"></a><a id="giekg"></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview-of-glassfish-server-performance-tuning">1 Overview of GlassFish Server Performance Tuning</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can significantly improve performance of the Oracle GlassFish Server
and of applications deployed to it by adjusting a few deployment and
server configuration settings. However, it is important to understand
the environment and performance goals. An optimal configuration for a
production environment might not be optimal for a development
environment.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#abear">Process Overview</a></p>
</li>
<li>
<p><a href="#abeat">Understanding Operational Requirements</a></p>
</li>
<li>
<p><a href="#abeba">General Tuning Concepts</a></p>
</li>
<li>
<p><a href="#abebd">Further Information</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="abear"></a><a id="GSPTG00048"></a><a id="process-overview"></a></p>
</div>
<div class="sect2">
<h3 id="_process_overview">Process Overview</h3>
<div class="paragraph">
<p>The following table outlines the overall GlassFish Server 4.0
administration process, and shows where performance tuning fits in the
sequence.</p>
</div>
<div class="paragraph">
<p><a id="sthref4"></a><a id="gacmh"></a></p>
</div>
<div class="paragraph">
<p>Table 1-1 Performance Tuning Roadmap</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 28%;">
<col style="width: 32%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Description of Task</th>
<th class="tableblock halign-left valign-top">Location of Instructions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Design: Decide on the high-availability topology and set up
GlassFish Server.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="../deployment-planning-guide/toc.html#GSPLG">GlassFish Server Open Source Edition Deployment Planning
Guide</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capacity Planning: Make sure the systems have sufficient resources
to perform well.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="../deployment-planning-guide/toc.html#GSPLG">GlassFish Server Open Source Edition Deployment Planning
Guide</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installation: Configure your DAS, clusters, and clustered server
instances.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="../installation-guide/toc.html#GSING">GlassFish Server Open Source Edition Installation Guide</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment: Install and run your applications. Familiarize yourself
with how to configure and administer the GlassFish Server.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The following books:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../application-deployment-guide/toc.html#GSDPG">GlassFish Server Open Source Edition Application
Deployment Guide</a></p>
</li>
<li>
<p><a href="../administration-guide/toc.html#GSADG">GlassFish Server Open Source Edition Administration Guide</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High Availability Configuration: Configuring your DAS, clusters, and
clustered server instances for high availability and failover</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="../ha-administration-guide/toc.html#GSHAG">GlassFish Server Open Source Edition High Availability
Administration Guide</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Performance Tuning: Tune the following items:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Applications</p>
</li>
<li>
<p>GlassFish Server</p>
</li>
<li>
<p>Java Runtime System</p>
</li>
<li>
<p>Operating system and platform</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The following chapters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="tuning-apps.html#abebe">Tuning Your Application</a></p>
</li>
<li>
<p><a href="tuning-glassfish.html#abedn">Tuning the GlassFish Server</a></p>
</li>
<li>
<p><a href="tuning-java.html#abeia">Tuning the Java Runtime System</a></p>
</li>
<li>
<p><a href="tuning-os.html#abeir">Tuning the Operating System and Platform</a></p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="abeas"></a><a id="GSPTG00035"></a><a id="performance-tuning-sequence"></a></p>
</div>
<div class="sect3">
<h4 id="_performance_tuning_sequence">Performance Tuning Sequence</h4>
<div class="paragraph">
<p>Application developers should tune applications prior to production use.
Tuning applications often produces dramatic performance improvements.
System administrators perform the remaining steps in the following list
after tuning the application, or when application tuning has to wait and
you want to improve performance as much as possible in the meantime.</p>
</div>
<div class="paragraph">
<p>Ideally, follow this sequence of steps when you are tuning performance:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Tune your application, described in
<a href="tuning-apps.html#abebe">Tuning Your Application</a>.</p>
</li>
<li>
<p>Tune the server, described in <a href="tuning-glassfish.html#abedn">Tuning
the GlassFish Server</a>.</p>
</li>
<li>
<p>Tune the Java runtime system, described in
<a href="tuning-java.html#abeia">Tuning the Java Runtime System</a>.</p>
</li>
<li>
<p>Tune the operating system, described in
<a href="tuning-os.html#abeir">Tuning the Operating System and Platform</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a id="abeat"></a><a id="GSPTG00049"></a><a id="understanding-operational-requirements"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_understanding_operational_requirements">Understanding Operational Requirements</h3>
<div class="paragraph">
<p>Before you begin to deploy and tune your application on the GlassFish
Server, it is important to clearly define the operational environment.
The operational environment is determined by high-level constraints and
requirements such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#abeau">Application Architecture</a></p>
</li>
<li>
<p><a href="#abeav">Security Requirements</a></p>
</li>
<li>
<p><a href="#gkvjf">High Availability Clustering, Load Balancing, and
Failover</a></p>
</li>
<li>
<p><a href="#abeay">Hardware Resources</a></p>
</li>
<li>
<p><a href="#abeaz">Administration</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="abeau"></a><a id="GSPTG00154"></a><a id="application-architecture"></a></p>
</div>
<div class="sect3">
<h4 id="_application_architecture">Application Architecture</h4>
<div class="paragraph">
<p>The Java EE Application model, as shown in the following figure, is very
flexible; allowing the application architect to split application logic
functionally into many tiers. The presentation layer is typically
implemented using servlets and JSP technology and executes in the web
container.</p>
</div>
<div class="paragraph">
<p><a id="GSPTG00001"></a><a id="gacmj"></a></p>
</div>
<div class="paragraph">
<div class="title"><strong>Figure 1-1 Java EE Application Model</strong></div>
<p><span class="image"><img src="img/appmodel.png" alt="Java EE Application Mode"></span></p>
</div>
<div class="paragraph">
<p>Moderately complex enterprise applications can be developed entirely
using servlets and JSP technology. More complex business applications
often use Enterprise JavaBeans (EJB) components. The GlassFish Server
integrates the Web and EJB containers in a single process. Local access
to EJB components from servlets is very efficient. However, some
application deployments may require EJB components to execute in a
separate process; and be accessible from standalone client applications
as well as servlets. Based on the application architecture, the server
administrator can employ the GlassFish Server in multiple tiers, or
simply host both the presentation and business logic on a single tier.</p>
</div>
<div class="paragraph">
<p>It is important to understand the application architecture before
designing a new GlassFish Server deployment, and when deploying a new
business application to an existing application server deployment.</p>
</div>
<div class="paragraph">
<p><a id="abeav"></a><a id="GSPTG00155"></a><a id="security-requirements"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_security_requirements">Security Requirements</h4>
<div class="paragraph">
<p>Most business applications require security. This section discusses
security considerations and decisions.</p>
</div>
<div class="paragraph">
<p><a id="abeaw"></a><a id="GSPTG00080"></a><a id="user-authentication-and-authorization"></a></p>
</div>
<div class="sect4">
<h5 id="_user_authentication_and_authorization">User Authentication and Authorization</h5>
<div class="paragraph">
<p>Application users must be authenticated. The GlassFish Server provides a
number of choices for user authentication, including file-based,
administration, LDAP, certificate, JDBC, digest, PAM, Solaris, and
custom realms.</p>
</div>
<div class="paragraph">
<p>The default file based security realm is suitable for developer
environments, where new applications are developed and tested. At
deployment time, the server administrator can choose between the
Lighweight Directory Access Protocol (LDAP) or Solaris security realms.
Many large enterprises use LDAP-based directory servers to maintain
employee and customer profiles. Small to medium enterprises that do not
already use a directory server may find it advantageous to leverage
investment in Solaris security infrastructure.</p>
</div>
<div class="paragraph">
<p>For more information on security realms, see
"<a href="../security-guide/user-security.html#GSSCG00151">Administering Authentication Realms</a>" in GlassFish
Server Open Source Edition Security Guide.</p>
</div>
<div class="paragraph">
<p>The type of authentication mechanism chosen may require additional
hardware for the deployment. Typically a directory server executes on a
separate server, and may also require a backup for replication and high
availability. Refer to the
<a href="http://www.oracle.com/us/products/middleware/identity-management/oracle-directory-services/index.html">Oracle
Java System Directory Server</a>
(<code>http://www.oracle.com/us/products/middleware/identity-management/oracle-directory-services/index.html</code>)
documentation for more information on deployment, sizing, and
availability guidelines.</p>
</div>
<div class="paragraph">
<p>An authenticated user&#8217;s access to application functions may also need
authorization checks. If the application uses the role-based Java EE
authorization checks, the application server performs some additional
checking, which incurs additional overheads. When you perform capacity
planning, you must take this additional overhead into account.</p>
</div>
<div class="paragraph">
<p><a id="abeax"></a><a id="GSPTG00081"></a><a id="encryption"></a></p>
</div>
</div>
<div class="sect4">
<h5 id="_encryption">Encryption</h5>
<div class="paragraph">
<p>For security reasons, sensitive user inputs and application output must
be encrypted. Most business-oriented web applications encrypt all or
some of the communication flow between the browser and GlassFish Server.
Online shopping applications encrypt traffic when the user is completing
a purchase or supplying private data. Portal applications such as news
and media typically do not employ encryption. Secure Sockets Layer (SSL)
is the most common security framework, and is supported by many browsers
and application servers.</p>
</div>
<div class="paragraph">
<p>The GlassFish Server supports SSL 2.0 and 3.0 and contains software
support for various cipher suites. It also supports integration of
hardware encryption cards for even higher performance. Security
considerations, particularly when using the integrated software
encryption, will impact hardware sizing and capacity planning.</p>
</div>
<div class="paragraph">
<p>Consider the following when assessing the encryption needs for a
deployment:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>What is the nature of the applications with respect to security? Do
they encrypt all or only a part of the application inputs and output?
What percentage of the information needs to be securely transmitted?</p>
</li>
<li>
<p>Are the applications going to be deployed on an application server
that is directly connected to the Internet? Will a web server exist in a
demilitarized zone (DMZ) separate from the application server tier and
backend enterprise systems?<br>
A DMZ-style deployment is recommended for high security. It is also
useful when the application has a significant amount of static text and
image content and some business logic that executes on the GlassFish
Server, behind the most secure firewall. GlassFish Server provides
secure reverse proxy plugins to enable integration with popular web
servers. The GlassFish Server can also be deployed and used as a web
server in DMZ.</p>
</li>
<li>
<p>Is encryption required between the web servers in the DMZ and
application servers in the next tier? The reverse proxy plugins supplied
with GlassFish Server support SSL encryption between the web server and
application server tier. If SSL is enabled, hardware capacity planning
must be take into account the encryption policy and mechanisms.</p>
</li>
<li>
<p>If software encryption is to be employed:</p>
<div class="ulist">
<ul>
<li>
<p>What is the expected performance overhead for every tier in the
system, given the security requirements?</p>
</li>
<li>
<p>What are the performance and throughput characteristics of various
choices?</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For information on how to encrypt the communication between web servers
and GlassFish Server, see "<a href="../security-guide/message-security.html#GSSCG00037">Administering Message
Security</a>" in GlassFish Server Open Source Edition Security Guide.</p>
</div>
<div class="paragraph">
<p><a id="gkvjf"></a><a id="GSPTG00156"></a><a id="high-availability-clustering-load-balancing-and-failover"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_high_availability_clustering_load_balancing_and_failover">High Availability Clustering, Load Balancing, and Failover</h4>
<div class="paragraph">
<p>GlassFish Server 4.0 enables multiple GlassFish Server instances to be
clustered to provide high availability through failure protection,
scalability, and load balancing.</p>
</div>
<div class="paragraph">
<p>High availability applications and services provide their functionality
continuously, regardless of hardware and software failures. To make such
reliability possible, GlassFish Server 4.0 provides mechanisms for
maintaining application state data between clustered GlassFish Server
instances. Application state data, such as HTTP session data, stateful
EJB sessions, and dynamic cache information, is replicated in real time
across server instances. If any one server instance goes down, the
session state is available to the next failover server, resulting in
minimum application downtime and enhanced transactional security.</p>
</div>
<div class="paragraph">
<p>GlassFish Server provides the following high availability features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>High Availability Session Persistence</p>
</li>
<li>
<p>High Availability Java Message Service</p>
</li>
<li>
<p>RMI-IIOP Load Balancing and Failover</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="tuning-java.html#glaat">Tuning High Availability Persistence</a> for
high availability persistence tuning recommendations.</p>
</div>
<div class="paragraph">
<p>See the <a href="../ha-administration-guide/toc.html#GSHAG">GlassFish Server Open Source Edition High
Availability Administration Guide</a> for complete information about
configuring high availability clustering, load balancing, and failover
features in GlassFish Server 4.0.</p>
</div>
<div class="paragraph">
<p><a id="abeay"></a><a id="GSPTG00157"></a><a id="hardware-resources"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_hardware_resources">Hardware Resources</h4>
<div class="paragraph">
<p>The type and quantity of hardware resources available greatly influence
performance tuning and site planning.</p>
</div>
<div class="paragraph">
<p>GlassFish Server provides excellent vertical scalability. It can scale
to efficiently utilize multiple high-performance CPUs, using just one
application server process. A smaller number of application server
instances makes maintenance easier and administration less expensive.
Also, deploying several related applications on fewer application
servers can improve performance, due to better data locality, and reuse
of cached data between co-located applications. Such servers must also
contain large amounts of memory, disk space, and network capacity to
cope with increased load.</p>
</div>
<div class="paragraph">
<p>GlassFish Server can also be deployed on large "farms" of relatively
modest hardware units. Business applications can be partitioned across
various server instances. Using one or more external load balancers can
efficiently spread user access across all the application server
instances. A horizontal scaling approach may improve availability, lower
hardware costs and is suitable for some types of applications. However,
this approach requires administration of more application server
instances and hardware nodes.</p>
</div>
<div class="paragraph">
<p><a id="abeaz"></a><a id="GSPTG00158"></a><a id="administration"></a></p>
</div>
</div>
<div class="sect3">
<h4 id="_administration">Administration</h4>
<div class="paragraph">
<p>A single GlassFish Server installation on a server can encompass
multiple instances. A group of one or more instances that are
administered by a single Administration Server is called a domain.
Grouping server instances into domains permits different people to
independently administer the groups.</p>
</div>
<div class="paragraph">
<p>You can use a single-instance domain to create a "sandbox" for a
particular developer and environment. In this scenario, each developer
administers his or her own application server, without interfering with
other application server domains. A small development group may choose
to create multiple instances in a shared administrative domain for
collaborative development.</p>
</div>
<div class="paragraph">
<p>In a deployment environment, an administrator can create domains based
on application and business function. For example, internal Human
Resources applications may be hosted on one or more servers in one
Administrative domain, while external customer applications are hosted
on several administrative domains in a server farm.</p>
</div>
<div class="paragraph">
<p>GlassFish Server supports virtual server capability for web
applications. For example, a web application hosting service provider
can host different URL domains on a single GlassFish Server process for
efficient administration.</p>
</div>
<div class="paragraph">
<p>For detailed information on administration, see the
<a href="../administration-guide/toc.html#GSADG">GlassFish Server Open Source Edition Administration Guide</a>.</p>
</div>
<div class="paragraph">
<p><a id="abeba"></a><a id="GSPTG00050"></a><a id="general-tuning-concepts"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_general_tuning_concepts">General Tuning Concepts</h3>
<div class="paragraph">
<p>Some key concepts that affect performance tuning are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>User load</p>
</li>
<li>
<p>Application scalability</p>
</li>
<li>
<p>Margins of safety</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following table describes these concepts, and how they are measured
in practice. The left most column describes the general concept, the
second column gives the practical ramifications of the concept, the
third column describes the measurements, and the right most column
describes the value sources.</p>
</div>
<div class="paragraph">
<p><a id="sthref6"></a><a id="gacmp"></a></p>
</div>
<div class="paragraph">
<p>Table 1-2 Factors That Affect Performance</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 14%;">
<col style="width: 13%;">
<col style="width: 26%;">
<col style="width: 47%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Concept</th>
<th class="tableblock halign-left valign-top">In practice</th>
<th class="tableblock halign-left valign-top">Measurement</th>
<th class="tableblock halign-left valign-top">Value sources</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Load</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Concurrent sessions at peak load</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Transactions Per Minute (TPM)</p>
</div>
<div class="paragraph">
<p>Web Interactions Per Second (WIPS)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>(Max. number of concurrent users) * (expected response time) / (time
between clicks)</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p>(100 users * 2 sec) / 10 sec = 20</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transaction rate measured on one CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TPM or
WIPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Measured from workload benchmark. Perform at each tier.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertical scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increase in performance from additional CPUs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Percentage gain per additional CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on curve fitting from
benchmark. Perform tests while gradually increasing the number of CPUs.
Identify the "knee" of the curve, where additional CPUs are providing
uneconomical gains in performance. Requires tuning as described in this
guide. Perform at each tier and iterate if necessary. Stop here if this
meets performance requirements.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Horizontal scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increase in performance from additional servers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Percentage gain per additional server process and/or hardware node.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use a well-tuned single application server instance, as in previous
step. Measure how much each additional server instance and hardware node
improves performance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Safety Margins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High availability requirements</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the system must cope
with failures, size the system to meet performance requirements assuming
that one or more application server instances are non functional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Different equations used if high availability is required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Excess capacity for unexpected peaks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">It is desirable to operate a
server at less than its benchmarked peak, for some safety margin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80%
system capacity utilization at peak loads may work for most
installations. Measure your deployment under real and simulated peak
loads.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="abebb"></a><a id="GSPTG00159"></a><a id="capacity-planning"></a></p>
</div>
<div class="sect3">
<h4 id="_capacity_planning">Capacity Planning</h4>
<div class="paragraph">
<p>The previous discussion guides you towards defining a deployment
architecture. However, you determine the actual size of the deployment
by a process called capacity planning. Capacity planning enables you to
predict:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The performance capacity of a particular hardware configuration.</p>
</li>
<li>
<p>The hardware resources required to sustain specified application load
and performance.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can estimate these values through careful performance benchmarking,
using an application with realistic data sets and workloads.</p>
</div>
<div class="paragraph">
<p><a id="gacmz"></a><a id="GSPTG00036"></a><a id="to-determine-capacity"></a></p>
</div>
<div class="sect4">
<h5 id="_to_determine_capacity">To Determine Capacity</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Determine performance on a single CPU.<br>
First determine the largest load that a single processor can sustain.
You can obtain this figure by measuring the performance of the
application on a single-processor machine. Either leverage the
performance numbers of an existing application with similar processing
characteristics or, ideally, use the actual application and workload in
a testing environment. Make sure that the application and data resources
are tiered exactly as they would be in the final deployment.</p>
</li>
<li>
<p><a id="CEGHGCGI"></a>
Determine vertical scalability.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Determine how much additional performance you gain when you add
processors. That is, you are indirectly measuring the amount of shared
resource contention that occurs on the server for a specific workload.
Either obtain this information based on additional load testing of the
application on a multiprocessor system, or leverage existing information
from a similar application that has already been load tested.</p>
</div>
<div class="paragraph">
<p>Running a series of performance tests on one to eight CPUs, in
incremental steps, generally provides a sense of the vertical
scalability characteristics of the system. Be sure to properly tune the
application, GlassFish Server, backend database resources, and operating
system so that they do not skew the results.
3.  Determine horizontal scalability.<br>
If sufficiently powerful hardware resources are available, a single
hardware node may meet the performance requirements. However for better
availability, you can cluster two or more systems. Employing external
load balancers and workload simulation, determine the performance
benefits of replicating one well-tuned application server node, as
determined in step <a href="#CEGHGCGI">2</a>.</p>
</div>
<div class="paragraph">
<p><a id="abebc"></a><a id="GSPTG00160"></a><a id="user-expectations"></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_user_expectations">User Expectations</h4>
<div class="paragraph">
<p>Application end-users generally have some performance expectations.
Often you can numerically quantify them. To ensure that customer needs
are met, you must understand these expectations clearly, and use them in
capacity planning.</p>
</div>
<div class="paragraph">
<p>Consider the following questions regarding performance expectations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>What do users expect the average response times to be for various
interactions with the application? What are the most frequent
interactions? Are there any extremely time-critical interactions? What
is the length of each transaction, including think time? In many cases,
you may need to perform empirical user studies to get good estimates.</p>
</li>
<li>
<p>What are the anticipated steady-state and peak user loads? Are there
are any particular times of the day, week, or year when you observe or
expect to observe load peaks? While there may be several million
registered customers for an online business, at any one time only a
fraction of them are logged in and performing business transactions. A
common mistake during capacity planning is to use the total size of
customer population as the basis and not the average and peak numbers
for concurrent users. The number of concurrent users also may exhibit
patterns over time.</p>
</li>
<li>
<p>What is the average and peak amount of data transferred per request?
This value is also application-specific. Good estimates for content
size, combined with other usage patterns, will help you anticipate
network capacity needs.</p>
</li>
<li>
<p>What is the expected growth in user load over the next year? Planning
ahead for the future will help avoid crisis situations and system
downtimes for upgrades.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a id="abebd"></a><a id="GSPTG00051"></a><a id="further-information"></a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_further_information">Further Information</h3>
<div class="ulist">
<ul>
<li>
<p>For more information on Java performance, see
<a href="http://java.sun.com/docs/performance">Java Performance Documentation</a>
(<code>http://java.sun.com/docs/performance</code>) and
<a href="http://java.sun.com/blueprints/performance/index.html">Java Performance
BluePrints</a> (<code>http://java.sun.com/blueprints/performance/index.html</code>).</p>
</li>
<li>
<p>For more information about performance tuning for high availability
configurations, see the <a href="../ha-administration-guide/toc.html#GSHAG">GlassFish Server Open Source Edition
High Availability Administration Guide</a>.</p>
</li>
<li>
<p>For complete information about using the Performance Tuning features
available through the GlassFish Server Administration Console, refer to
the Administration Console online help.</p>
</li>
<li>
<p>For details on optimizing EJB components, see
<a href="http://java.sun.com/developer/technicalArticles/ebeans/sevenrules/">Seven
Rules for Optimizing Entity Beans</a>
(<code>http://java.sun.com/developer/technicalArticles/ebeans/sevenrules/</code>)</p>
</li>
<li>
<p>For details on profiling, see "<a href="../application-development-guide/setting-up-dev-env.html#GSDVG00341">Profiling Tools</a>" in
GlassFish Server Open Source Edition Application Development Guide.</p>
</li>
<li>
<p>To view a demonstration video showing how to use the GlassFish Server
Performance Tuner, see the
<a href="http://www.youtube.com/watch?v=FavsE2pzAjc">Oracle GlassFish Server 3.1 -
Performance Tuner demo</a> (<code>http://www.youtube.com/watch?v=FavsE2pzAjc</code>).</p>
</li>
<li>
<p>To find additional Performance Tuning development information, see the
<a href="http://blogs.oracle.com/jenblog/entry/performance_tuner_in_oracle_glassfish">Performance
Tuner in Oracle GlassFish Server 3.1</a>
(<code>http://blogs.oracle.com/jenblog/entry/performance_tuner_in_oracle_glassfish</code>)
blog.</p>
</li>
</ul>
</div>
</div>
</div>
</div>

<hr />

<table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
	<colgroup>
		<col width="12%"/>
		<col width="12%"/>
		<col width="*"/>
	</colgroup>
	<tr>		
		<td align="left">
		<a href="preface.html">
			<span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Previous</span>
		</a>
		</td>

		<td align="left">
		<a href="tuning-apps.html">
			<span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Next</span>
		</a>
		</td>

		<td align="right">
		<a href="toc.html">
			<span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
			<span style="position:relative;top:-2px;">Contents</span>
		</a>
		</td>
	</tr>
</table>

<span id="copyright">
        <img src="img/eclipse_foundation_logo_tiny.png" height="20px" alt="Eclipse Foundation Logo" align="top"/>&nbsp;            
        <span >Copyright&nbsp;&copy;&nbsp;2019,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.</span>
</span>

<p align="center" class="beta">DRAFT</p>

</body>
</html>