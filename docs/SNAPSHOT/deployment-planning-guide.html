<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Eclipse GlassFish Deployment Planning Guide, Release 7</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Eclipse GlassFish Deployment Planning Guide, Release 7</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#eclipse-glassfish-server">Eclipse GlassFish</a></li>
<li><a href="#preface">Preface</a>
<ul class="sectlevel2">
<li><a href="#glassfish-server-documentation-set">Eclipse GlassFish Documentation Set</a></li>
<li><a href="#related-documentation">Related Documentation</a></li>
<li><a href="#typographic-conventions">Typographic Conventions</a></li>
<li><a href="#symbol-conventions">Symbol Conventions</a></li>
<li><a href="#default-paths-and-file-names">Default Paths and File Names</a></li>
</ul>
</li>
<li><a href="#product-concepts">1 Product Concepts</a>
<ul class="sectlevel2">
<li><a href="#java-ee-platform-overview">Jakarta EE Platform Overview</a>
<ul class="sectlevel3">
<li><a href="#java-ee-applications">Jakarta EE Applications</a></li>
<li><a href="#containers">Containers</a></li>
<li><a href="#java-ee-services">Jakarta EE Services</a></li>
<li><a href="#web-services">Web Services</a></li>
<li><a href="#client-access">Client Access</a></li>
<li><a href="#external-systems-and-resources">External Systems and Resources</a></li>
</ul>
</li>
<li><a href="#glassfish-server-components">Eclipse GlassFish Components</a>
<ul class="sectlevel3">
<li><a href="#server-instances">Server Instances</a></li>
<li><a href="#administrative-domains">Administrative Domains</a></li>
<li><a href="#clusters">Clusters</a></li>
<li><a href="#named-configurations">Named Configurations</a></li>
<li><a href="#http-load-balancer-plug-in">HTTP Load Balancer Plug-in</a></li>
<li><a href="#session-persistence">Session Persistence</a></li>
<li><a href="#iiop-load-balancing-in-a-cluster">IIOP Load Balancing in a Cluster</a></li>
<li><a href="#message-queue-and-jms-resources">Message Queue and JMS Resources</a></li>
</ul>
</li>
<li><a href="#configuration-roadmap-for-high-availability-of-glassfish-server">Configuration Roadmap for High Availability of Eclipse GlassFish</a>
<ul class="sectlevel3">
<li><a href="#to-configure-glassfish-server-for-high-availability">To Configure Eclipse GlassFish for High Availability</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#planning-your-deployment">2 Planning your Deployment</a>
<ul class="sectlevel2">
<li><a href="#establishing-performance-goals">Establishing Performance Goals</a>
<ul class="sectlevel3">
<li><a href="#estimating-throughput">Estimating Throughput</a></li>
<li><a href="#estimating-load-on-glassfish-server-instances">Estimating Load on Eclipse GlassFish Instances</a></li>
</ul>
</li>
<li><a href="#planning-the-network-configuration">Planning the Network Configuration</a>
<ul class="sectlevel3">
<li><a href="#setting-up-traffic-separation">Setting Up Traffic Separation</a></li>
<li><a href="#estimating-bandwidth-requirements">Estimating Bandwidth Requirements</a></li>
<li><a href="#calculating-bandwidth-required">Calculating Bandwidth Required</a></li>
<li><a href="#estimating-peak-load">Estimating Peak Load</a></li>
<li><a href="#choosing-network-cards">Choosing Network Cards</a></li>
</ul>
</li>
<li><a href="#planning-for-availability">Planning for Availability</a>
<ul class="sectlevel3">
<li><a href="#rightsizing-availability">Rightsizing Availability</a></li>
<li><a href="#using-clusters-to-improve-availability">Using Clusters to Improve Availability</a></li>
<li><a href="#adding-redundancy-to-the-system">Adding Redundancy to the System</a></li>
</ul>
</li>
<li><a href="#design-decisions">Design Decisions</a>
<ul class="sectlevel3">
<li><a href="#designing-for-peak-or-steady-state-load">Designing for Peak or Steady State Load</a></li>
<li><a href="#system-sizing">System Sizing</a></li>
<li><a href="#sizing-the-administration-thread-pool">Sizing the Administration Thread Pool</a></li>
</ul>
</li>
<li><a href="#planning-message-queue-broker-deployment">Planning Message Queue Broker Deployment</a>
<ul class="sectlevel3">
<li><a href="#multi-broker-clusters">Multi-Broker Clusters</a></li>
<li><a href="#configuring-glassfish-server-to-use-message-queue-brokers">Configuring Eclipse GlassFish to Use Message Queue Brokers</a></li>
<li><a href="#example-deployment-scenarios">Example Deployment Scenarios</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#checklist-for-deployment">3 Checklist for Deployment</a>
<ul class="sectlevel2">
<li><a href="#checklist">Checklist</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="eclipse-glassfish-server"><a class="anchor" href="#eclipse-glassfish-server"></a>Eclipse GlassFish</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Deployment Planning Guide</p>
</div>
<div class="paragraph">
<p>Release 7</p>
</div>
<div class="paragraph">
<p>Contributed 2018 - 2024</p>
</div>
<div class="paragraph">
<p>This book explains how to build a production deployment of Eclipse GlassFish.</p>
</div>
<hr>
<div class="paragraph">
<p>Eclipse GlassFish Deployment Planning Guide, Release 7</p>
</div>
<div class="paragraph">
<p>Copyright Â© 2013, 2019 Oracle and/or its affiliates. All rights reserved.</p>
</div>
<div class="paragraph">
<p>This program and the accompanying materials are made available under the
terms of the Eclipse Public License v. 2.0, which is available at
<a href="http://www.eclipse.org/legal/epl-2.0" class="bare">http://www.eclipse.org/legal/epl-2.0</a>.</p>
</div>
<div class="paragraph">
<p>SPDX-License-Identifier: EPL-2.0</p>
</div>
<div class="paragraph">
<p>Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.</p>
</div>
<div class="paragraph">
<p>Intel and Intel Xeon are trademarks or registered trademarks of Intel
Corporation. All SPARC trademarks are used under license and are
trademarks or registered trademarks of SPARC International, Inc. AMD,
Opteron, the AMD logo, and the AMD Opteron logo are trademarks or
registered trademarks of Advanced Micro Devices. UNIX is a registered
trademark of The Open Group.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHoAAAAoCAYAAAAxH+4YAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4gsHAhURI94LCQAADalJREFUeNrtnHmw19QVxz+/t0EeyKJVXBAxWAUVcUcbE6xaRTvWsVXrUlsdbZUaday4MCLWjVbEVm2sjLbVukxVFFrtQlUUEuO4gguCGxERkMciD/QReNuvf+RErnnJ75ffAwo678xkXn5Zbu69Z7nnfM+5r0AKhY6OZgfq725AD2Bf4DBgIFAPtACLgFnAS0ATsE6zg3a6aKuiQqmboaP3BYYDPwVOAWqBdmHuZ8AXwmxNXnGBacC7wFKgqApMF205qklqMoBmB4SOfiQwGvi+3F4IPAH4wDvAx5odhIn3dwO+Dewmmr2qa4q3Mo0WJhc0OyiGjn4ZMA7oI7fHAI8AizQ7aC1l5uVaAajR7KCla4q3Moq1OXT08aGjF+V4N3T0vUNHr1Kfi58t1U7yvIu2EgbL+SUKk/3Q0XfpYtg3g1RNPQK4Xn6+BZyl2cHiNNPcRV/TNTp09N7Ag8CJwDrgMM0O3uxi8jdPo4cLkwEu3lRMtkyj0/fT7uW91pk2N7adjZmDjR1XLo0WMORe4GzgbeBAzQ5aVUbLR7tV2Har6/ltWQNwPT/+3UtAmP5iYRYAvuv56+Ln42fld7USFhZdz2+uUPhqFQH/Sh8t0ygIVpCFLxTlnXZ1PGr/0q5bpnGIhKl7Ad2BVcCbwFOu5wdZ7VimUQNUVzjv64VXRSCOkNpriBCuk+XCBKAtjqUT8fa6Cj94O3BZ2uAt09As0zgauBowMhgyWfozG2hTJuJKYLwyqO4V9mseMEjOrwVuUu4NFcBnpzLCshJ4HLhDwKGiMra4n1WWaRwD/AHYM2uOLNOYClzlev4HKcyeoljavLSDzFt3YC5wJHBxlUhZT6ABeFGzg2KGJNMJyUpjcj9gEvBUFpOFTgVeAK6zTKOHMgFqu2s60a/Ps/ooQv55jja2Ay4A3gDOUy2UjLEAnC5jVJn8BRGiqM7nycDTlmnsm2IZmioc2xdire4CngXqgGeAQTWyPkOEVX+Wo7GiPFcKz65XJ0xhci3wKDAi8fzzwEfS5u7A0XK9G3Ac8PtODHpT0FIgTJjyetEaZCJvt0xjmev5TyoauSMwVu4DzAd+CwRiTnsDFvALoBdR7mA0cE4ZJoZl/K1G4c9Hcj4NWA7sWCMfAXg/p4a0AqY0VMqbT9OMSQkmTxXzvQxolk7WAdsDtwD7AD8DVmWthZuR2gEbmK4wLCYTuAfYlijZc6FlGk+7nr9OfJCdgCGKYoxwPX9xwsJNA/4D3AjcD/y9TH/uAO4uo2DtwArxIVYq1xfWsCEhsbSCrFOD6/l5tF/V5v2AHym3HgQucD0/TDguoev5qy3TOAWodz2/aQswOaZG1/MbUxzJJyzT2AX4nThLg4Wxs+XR3kob7yWZLNTiev5zwHMVLDlL0xzcPFQjmkRsFnKGVbnTkAqDzhBfADEt45NMTqx1RWBLMrnUWAD+Jk5PNdBXrFBMy5XzwZZpnAx4wJo4SkhEEnnG2B47yp1l9CdJlCwHyLK/ZRqlzHw18LYaIgEHyvUi8JLr+e+mTF65yd3ilMGUYuxgifX6lChlayneswu8YZnGIlmqPgHedT1/Sc4x9gcOtkyjvQRfVgCfqOGfyuhZct4zJazKYuL9ZbS6N3CoOCGxy99H8Wz9CiR5S1KxhOCdo8TzK8Rxi59ZaZnGNUQZv11iGVEY3yZr6KeWabwC3OB6/qIy8/GTMqFWnViZcWlOW42yrgwIHb02R2qxQJRvLke1ynk35XdRJmZrZzJpptIyjXrgQnEiYzBjruv5byeE9wXgEOByCcV6JpRlBzn2A061TMNwPX9uCWZvK0cp2j4L7KkR7k8DhonWLc8xAWvLxNY9EhrfrKA0hbjDW7lGVwEzckCRK4Hb0sbjev6nEjaNtkxjiCCAg4EDgMPFEa6WeX8O2LHEfDQTVfNkUbcUXKAD4nU/8FegXw5GNwN7CIyXFzBZoYRj1RK73/010Ohy9DFwrev5XiJy6CDArufPE1Qufqa7IHwXCx/6WaZxkuv5/8j41g2CNraVsUCpwlAjFSUzJI4+IXT0OWXW6gIQxo5WTuelzTKNdwQIqQKOsExjoOv5CzIw3s54pZuDAsEWVHPYIijibOBR1/PnCBJWVNdxudZPni2mjGedZRo3Agcpa/dQIIvRLcBaiUY65XWj2UFD6Oi3iITdodnB+k0RXiXM3sOyVmmCNV9nmcb5IgRf4sSJiTrQ9fzXtxCT2wULn5EATNqAphhHkD4XVW2WCGMcMAA4yvX8RlVYlfFUJeaylLa2d5bJADVx3KzZwcOho48EbgZGl4mnh1umsbqMZ77I9fxPFCl/zTKNp4DTFK+1v2UaF7qeP1+dAMs0DhAUaF/LNM5MwIslveIKQqJcEKjr+UsqDP8KgnLtKr99yzROjLNUCTozgRS+WuJTAy3TOLyEMBTED3rL9fyWNNONwuyzQ0efETq6odmBHwMoxz3awZt+OsckTQSuSFw7C9ifDUD/McCHlmkEwBy5djCws/LOZMs0DnI9f07KN3awTKMcs+90Pf/STipCoZMh2RjgIfm9NzDfMo2ZwExZCnYCRgrEG9M81/OfLdHuRXKU8592B5akeZZxeS9yfqSs1YNyxtW5QhPRqlbgOyIoajWpDvxAjp0TDt0/E45fVYX9aE2xNlltFZT7VZ1htGj448CtCcdohJjziRJyfYXJcYycWO4qzUW3lFyjVWYLY68FDggdvV6zg7UKbJk3LdgdWJycAGH2SoEEfyyDO4yO+d8lEodOBaa6nr9eMb8NRAUSefyEWgX5i2kuG5InSxP3QrEsTSKoFadBpZ/rLdMYK2DUGUTp2O1SHp8F/Bu41/X8hSlLTCD9bclpfdZket3qD4XZ7aGjz1Ikvk0ksr0Ck7cmaz1zPX8tcJ9lGlOAbwHbyAEReP85sNz1/DUpa+xUorRmMWc/klm0S9hQRZL0MxaKw1irAjuVarT0txl4xDKN/8oY+8jfWgk1V4qlaogTFSnr/QTAqWCs7eRLNYtYb6La7CywIatGqlztVGfrqErVhZWrGdvYb6aNMXkv61oXddH/n5Ian3cXRynrkdVm2vVS36+0L5X2s5J5ydt2pc/mtbiFnMwsSPzbnAgj3tHs4AP1o7GXHjr6gYLn1gGzNTuYUaL9k4D5mh3MUa4NF6/zJbUgInT0GuB7wAeaHXwo1+olVAvUNuTejoLItUqfVwEvaHYQho5eSKuRi8cROvpZwAfAKyn7y3oDx6Z47kXgec0OlivPVovj+Z5mB/MyvtUdOEni72XAk5odNGbsbRtIVOs3Pa7YlTBuN7nWXNIZK0FVRCm3ZmFcXEp6jYQRqjNXkOtXiPe9FugVOvqDwM+BlpSQ7S8CkIxVrl0sKNqZCdy8TuLUgaGjD9HsoIko8X8b8IASj6PEsQ+Jo1IlXumC0NFHaXYwPW0iZRwj5T1f+rAw0W5/orRgtfSvyIaK1BF8NWdQB9wpx7wUJg8R6HMQUW1YPbA8dPSTNTt4OaWPhwCPAT8U57RAVE58OvBymkNWaUx6swTkg4k2xf8p5ZljieqgHBl4X+B8otqvURlxeS861o3Xy5FmhbqL5KvATU861nbFwtxMVFXaV6xBHXBX6Oi7qxhCgsZLuDUMKaBMPDdX+tdblOB5ojRhNwkNk9Shf/LtGmCytLO3Zge9ier4GoFpoaN3T5mzWEEnh44+UKxSHVHWsJClqZVQI9Em+MVyrE6YlG5ifl4FfqPZQVEQt/sERLh6E7kGNaIZw0JHvxWlwqMEbv2ZZgeNmh3MBL4rpu8oFRRSfAGLKJU4TjTmIlkeVE0siolcL+FnO7Bes4NmCU/zjuUEonqz0zQ7eE+Wk8VEhQZ9gHMzhL1ZNHdm6Oh9yuDkFTP6PGHYI2Im90rcryNKYc6KA3dlwHPILoz/MvujPF8s4UfUElVnXimw4Nk5/I0qpf2lEiPvlNQwobFEe8Eniok0gX3i+wkNK6SdV4Ao7ip9mxkLkLwfV/7skTGW1cKPnrKE9CyFc1TK6OXAh3LMp+PujTaRsgFAdWJt2VXWnyzorkeKqWsrIan1mh38kaiadBxRLXU5DDruTw8BL1alePbDxVQvCx39UqKdDk3ITtPNsIU4Bpb2VJeR0NFjIWzIGEs34DVZl0cK0LN+UzF6qmYHo4GrROoXJDRiLVG1yvHA8YpJPJzof6Dcn9HuS8CI0NF3kMH2l7V0fonSpljjryfaMVGOya3SlwFExXoNwIvJaEF8iV5EJT4TxCncBjg+dPS9NsPu0uniZT+QsAST5O8jpaBmzQ6eAUaJ4BbLYt2VgOZp7rtCU8QDfDx09PfF6x4mzsu4jHcuFemcFzr6fKJ87gKifUtJRhRFy2MNXRI6+hjxWrO2E2mAq2hjE/ArzQ5mJ0LCwaIdEzU7uELR9n5Ee6x+Ldh12jfKwcPtyf7Jt5eEjn458OfQ0dcKjr8HUbnVKM0OFmakjNXvPSDLy9CN1egi0c6J2eVAAs0O1kjC4lzgdTHxVxHtuV6VFvBrdvAWUTbnIXH2JgBHaHbwYcogW8Tb/5fyvgv8kigNmKSPJAS8SY5LgaGaHdwjoWByPqaoIaO03yD+wHsp7bdKXx4rYTpbJfzzU7zugmYHDxGlZ+8V/2EycKhmB5PkfrK9OURZsEbFko4h2lCQum3nf8vVJ/NUdLY+AAAAAElFTkSuQmCC" alt="Eclipse Logo"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preface"><a class="anchor" href="#preface"></a>Preface</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This documentation is part of the Java Enterprise Edition contribution
to the Eclipse Foundation and is not intended for use in relation to
Java Enterprise Edition or Orace GlassFish. The documentation is in the
process of being revised to reflect the new Jakarta EE branding.
Additional changes will be made as requirements and procedures evolve
for Jakarta EE. Where applicable, references to Jakarta EE or Java
Enterprise Edition should be considered references to Jakarta EE.</p>
</div>
<div class="paragraph">
<p>Please see the Title page for additional license information.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Deployment Planning Guide explains how to build a production
deployment of Eclipse GlassFish.</p>
</div>
<div class="paragraph">
<p>This preface contains information about and conventions for the entire
Eclipse GlassFish (Eclipse GlassFish) documentation set.</p>
</div>
<div class="paragraph">
<p>Eclipse GlassFish 7 is developed through the GlassFish project
open-source community at <a href="https://github.com/eclipse-ee4j/glassfish" class="bare">https://github.com/eclipse-ee4j/glassfish</a>.
The GlassFish project provides a structured process for developing the
Eclipse GlassFish platform that makes the new features of the Jakarta EE
platform available faster, while maintaining the most important feature
of Jakarta EE: compatibility. It enables Java developers to access the
Eclipse GlassFish source code and to contribute to the development of the
Eclipse GlassFish.</p>
</div>
<div class="sect2">
<h3 id="glassfish-server-documentation-set"><a class="anchor" href="#glassfish-server-documentation-set"></a>Eclipse GlassFish Documentation Set</h3>
<div class="paragraph">
<p>The Eclipse GlassFish documentation set describes deployment planning and
system installation. For an introduction to Eclipse GlassFish, refer to
the books in the order in which they are listed in the following table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Book Title</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="release-notes.html#GSRLN">Release Notes</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides late-breaking information about
the software and the documentation and includes a comprehensive,
table-based summary of the supported hardware, operating system, Java
Development Kit (JDK), and database drivers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="quick-start-guide.html#GSQSG">Quick Start Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explains how to get started with the Eclipse GlassFish product.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="installation-guide.html#GSING">Installation Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explains how to install the software and its components.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="upgrade-guide.html#GSUPG">Upgrade Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explains how to upgrade to the latest version of Eclipse GlassFish.
This guide also describes differences between adjacent product releases and configuration
options that can result in incompatibility with the product specifications.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="deployment-planning-guide.html#GSPLG">Deployment Planning Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explains how to build a production deployment of Eclipse GlassFish that meets the requirements of
your system and enterprise.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="administration-guide.html#GSADG">Administration Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explains how to configure, monitor, and manage Eclipse GlassFish subsystems and components
from the command line by using the <a href="reference-manual.html#asadmin"><code>asadmin</code>(1M)</a> utility.
Instructions for performing these tasks from the Administration Console are provided
in the Administration Console online help.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="security-guide.html#GSSCG">Security Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides instructions for configuring and administering Eclipse GlassFish security.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="application-deployment-guide.html#GSDPG">Application Deployment Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explains how to assemble and deploy applications to the Eclipse GlassFish and provides information
about deployment descriptors.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="application-development-guide.html#GSDVG">Application Development Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explains how to create and implement Java Platform, Enterprise Edition (Jakarta EE platform)
applications that are intended to run on the Eclipse GlassFish.
These applications follow the open Java standards model for Jakarta EE components
and application programmer interfaces (APIs).
This guide provides information about developer tools, security, and debugging.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="add-on-component-development-guide.html#GSACG">Add-On Component Development Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explains how to use published interfaces of Eclipse GlassFish to develop add-on components
for Eclipse GlassFish.
This document explains how to perform only those tasks that ensure that the add-on component
is suitable for Eclipse GlassFish.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="embedded-server-guide.html#GSESG">Embedded Server Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explains how to run applications in embedded Eclipse GlassFish and to develop applications
in which Eclipse GlassFish is embedded.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ha-administration-guide.html#GSHAG">High Availability Administration Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explains how to configure Eclipse GlassFish to provide higher availability and
scalability through failover and load balancing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="performance-tuning-guide.html#GSPTG">Performance Tuning Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explains how to optimize the performance of Eclipse GlassFish.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="troubleshooting-guide.html#GSTSG">Troubleshooting Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes common problems that you might encounter when using Eclipse GlassFish and explains how to solve them.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="error-messages-reference.html#GSEMR">Error Message Reference</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes error messages that you might encounter when using Eclipse GlassFish.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="reference-manual.html#GSRFM">Reference Manual</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides reference information in man page format for Eclipse GlassFish administration commands, utility
commands, and related concepts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://eclipse-ee4j.github.io/openmq/guides//mq-release-notes/toc.html">Message Queue Release Notes</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes new features, compatibility issues, and existing bugs for Open Message Queue.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://eclipse-ee4j.github.io/openmq/guides//mq-tech-over/toc.html">Message Queue Technical Overview</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides an introduction to the technology, concepts, architecture, capabilities, and features of
the Message Queue messaging service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://eclipse-ee4j.github.io/openmq/guides//mq-admin-guide/toc.html">Message Queue Administration Guide</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explains how to set up and manage a Message Queue messaging system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://eclipse-ee4j.github.io/openmq/guides//mq-dev-guide-jmx/toc.html">Message Queue Developer&#8217;s Guide for JMX Clients</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes the application programming interface in Message Queue for
programmatically configuring and monitoring Message Queue resources in
conformance with the Java Management Extensions (JMX).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://eclipse-ee4j.github.io/openmq/guides//mq-dev-guide-java/toc.html">Message Queue Developer&#8217;s Guide for Java Clients</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides information about concepts and procedures for developing Java messaging
applications (Java clients) that work with Eclipse GlassFish.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://eclipse-ee4j.github.io/openmq/guides//mq-dev-guide-c/toc.html">Message Queue Developer&#8217;s Guide for C Clients</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides programming and reference information for developers working with
Message Queue who want to use the C language binding to the Message
Queue messaging service to send, receive, and process Message Queue messages.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="related-documentation"><a class="anchor" href="#related-documentation"></a>Related Documentation</h3>
<div class="paragraph">
<p>The following tutorials explain how to develop Jakarta EE applications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/eclipse-ee4j/jakartaee-firstcup-examples">
Your First Cup: An Introduction to the Jakarta EE Platform</a>.
For beginning Jakarta EE programmers, this short tutorial explains the entire
process for developing a simple enterprise application.
The sample application is a web application that consists of a component that is
based on the Enterprise JavaBeans specification, a JAX-RS web service,
and a JavaServer Faces component for the web front end.</p>
</li>
<li>
<p><a href="https://eclipse-ee4j.github.io/jakartaee-tutorial">The Jakarta EE Tutorial</a>.
This comprehensive tutorial explains how to use Jakarta EE platform technologies
and APIs to develop Jakarta EE applications.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Javadoc tool reference documentation for packages that are provided with
Eclipse GlassFish is available as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Jakarta EE specifications and API specification is
located at <a href="https://jakarta.ee/specifications/" class="bare">https://jakarta.ee/specifications/</a>.</p>
</li>
<li>
<p>The API specification for Eclipse GlassFish 7, including Jakarta EE
platform packages and nonplatform packages that are specific to the
Eclipse GlassFish product, is located at
<a href="https://glassfish.org/docs/" class="bare">https://glassfish.org/docs/</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For information about creating enterprise applications in the NetBeans
Integrated Development Environment (IDE), see the
<a href="https://netbeans.apache.org/kb/docs/java-ee.html">
NetBeans Documentation, Training &amp; Support page</a>.</p>
</div>
<div class="paragraph">
<p>For information about the Derby database for use with
the Eclipse GlassFish, see the <a href="https://db.apache.org/derby/index.html">Derby page</a>.</p>
</div>
<div class="paragraph">
<p>The Jakarta EE Samples project is a collection of sample applications that
demonstrate a broad range of Jakarta EE technologies. The Jakarta EE Samples
are bundled with the Jakarta EE Software Development Kit (SDK) and are also
available from the repository
(<code><a href="https://github.com/eclipse-ee4j/glassfish-samples" class="bare">https://github.com/eclipse-ee4j/glassfish-samples</a></code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="typographic-conventions"><a class="anchor" href="#typographic-conventions"></a>Typographic Conventions</h3>
<div class="paragraph">
<p>The following table describes the typographic changes that are used in
this book.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14%;">
<col style="width: 37%;">
<col style="width: 49%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Typeface</th>
<th class="tableblock halign-left valign-top">Meaning</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AaBbCc123</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The names of commands, files, and directories, and onscreen computer output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Edit your <code>.login</code> file.</p>
<p class="tableblock">Use <code>ls</code> <code>a</code> to list all files.</p>
<p class="tableblock"><code>machine_name% you have mail.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AaBbCc123</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What you type, contrasted with onscreen computer output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>machine_name%</code> <code>su</code></p>
<p class="tableblock"><code>Password:</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AaBbCc123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A placeholder to be replaced with a real name or value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command to remove a file is <code>rm</code> filename.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AaBbCc123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Book titles, new terms, and terms to be emphasized (note that some emphasized items appear bold online)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read Chapter 6 in the User&#8217;s Guide.</p>
<p class="tableblock">A cache is a copy that is stored locally.</p>
<p class="tableblock">Do not save the file.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="symbol-conventions"><a class="anchor" href="#symbol-conventions"></a>Symbol Conventions</h3>
<div class="paragraph">
<p>The following table explains symbols that might be used in this book.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 26%;">
<col style="width: 28%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Symbol</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[ ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains optional arguments and command options.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ls [-l]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>-l</code> option is not required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ | }</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains a set of choices for a required command option.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-d {y|n}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>-d</code> option requires that you use either the <code>y</code> argument or the <code>n</code> argument.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${ }</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates a variable reference.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${com.sun.javaRoot}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">References the value of the <code>com.sun.javaRoot</code> variable.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Joins simultaneous multiple keystrokes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Control-A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Press the Control key while you press the A key.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Joins consecutive multiple keystrokes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ctrl+A+N</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Press the Control key, release it, and then press the subsequent keys.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates menu item selection in a graphical user interface.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File &gt; New &gt; Templates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">From the File menu, choose New. From the New submenu, choose Templates.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="default-paths-and-file-names"><a class="anchor" href="#default-paths-and-file-names"></a>Default Paths and File Names</h3>
<div class="paragraph">
<p>The following table describes the default paths and file names that are
used in this book.</p>
</div>
<table class="tableblock frame-all grid-all fit-content stretch">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Placeholder</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">as-install</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Represents the base installation directory for Eclipse GlassFish.
In configuration files, as-install is represented as follows:
<code>${com.sun.aas.installRoot}</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Installations on the Oracle Solaris operating system, Linux operating
system, and Mac OS operating system:</p>
<div class="paragraph">
<p>user&#8217;s-home-directory<code>/glassfish7/glassfish</code></p>
</div>
</li>
<li>
<p>Installations on the Windows operating system:</p>
<div class="paragraph">
<p>SystemDrive<code>:\glassfish7\glassfish</code></p>
</div>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">as-install-parent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the parent of the base installation directory for Eclipse GlassFish.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Installations on the Oracle Solaris operating system, Linux operating
system, and Mac operating system:</p>
<div class="paragraph">
<p>user&#8217;s-home-directory<code>/glassfish7</code></p>
</div>
</li>
<li>
<p>Installations on the Windows operating system:</p>
<div class="paragraph">
<p>SystemDrive<code>:\glassfish7</code></p>
</div>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">domain-root-dir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the directory in which a domain is created by default.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">as-install<code>/domains/</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">domain-dir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the directory in which a domain&#8217;s configuration is stored.
In configuration files, domain-dir is represented as follows:
<code>${com.sun.aas.instanceRoot}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">domain-root-dir/domain-name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">instance-dir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the directory for a server instance.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">domain-dir/instance-name</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="product-concepts"><a class="anchor" href="#product-concepts"></a>1 Product Concepts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Eclipse GlassFish provides a robust platform for the
development, deployment, and management of Jakarta EE applications. Key
features include scalable transaction management, web services
performance, clustering, security, and integration capabilities.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#java-ee-platform-overview">Jakarta EE Platform Overview</a></p>
</li>
<li>
<p><a href="#glassfish-server-components">Eclipse GlassFish Components</a></p>
</li>
<li>
<p><a href="#configuration-roadmap-for-high-availability-of-glassfish-server">Configuration Roadmap for High Availability of Eclipse GlassFish</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="java-ee-platform-overview"><a class="anchor" href="#java-ee-platform-overview"></a>Jakarta EE Platform Overview</h3>
<div class="paragraph">
<p>Eclipse GlassFish implements Java platform, Enterprise Edition (Jakarta EE)
7 technology. The Jakarta EE platform is a set of standard specifications
that describe application components, APIs, and the runtime containers
and services of an application server.</p>
</div>
<div class="sect3">
<h4 id="java-ee-applications"><a class="anchor" href="#java-ee-applications"></a>Jakarta EE Applications</h4>
<div class="paragraph">
<p>Jakarta EE applications are made up of components such as JavaServer Pages
(JSP), Java servlets, and Enterprise JavaBeans (EJB) modules. These
components enable software developers to build large-scale, distributed
applications. Developers package Jakarta EE applications in Java Archive
(JAR) files (similar to zip files), which can be distributed to
production sites. Administrators install Jakarta EE applications onto
Eclipse GlassFish by deploying Jakarta EE JAR files onto one or more server
instances (or clusters of instances).</p>
</div>
</div>
<div class="sect3">
<h4 id="containers"><a class="anchor" href="#containers"></a>Containers</h4>
<div class="paragraph">
<p>Each server instance includes two containers: web and EJB. A container
is a runtime environment that provides services such as security and
transaction management to Jakarta EE components. Web components, such as
Java Server Pages and servlets, run within the web container. Enterprise
JavaBeans run within the EJB container.</p>
</div>
</div>
<div class="sect3">
<h4 id="java-ee-services"><a class="anchor" href="#java-ee-services"></a>Jakarta EE Services</h4>
<div class="paragraph">
<p>The Jakarta EE platform provides services for applications, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Naming - A naming and directory service binds objects to names. A Java
EE application can locate an object by looking up its Java Naming and
Directory Interface (JNDI) name.</p>
</li>
<li>
<p>Security - The Java Authorization Contract for Containers (JACC) is a
set of security contracts defined for the Jakarta EE containers. Based on
the client&#8217;s identity, containers can restrict access to the container&#8217;s
resources and services.</p>
</li>
<li>
<p>Transaction management - A transaction is an indivisible unit of work.
For example, transferring funds between bank accounts is a transaction.
A transaction management service ensures that a transaction is either
completed, or is rolled back.</p>
</li>
<li>
<p>Message Service - Applications hosted on separate systems can
communicate with each other by exchanging messages using the Java
Message Service (JMS). JMS is an integral part of the Jakarta EE platform
and simplifies the task of integrating heterogeneous enterprise
applications.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="web-services"><a class="anchor" href="#web-services"></a>Web Services</h4>
<div class="paragraph">
<p>Clients can access a Jakarta EE application as a remote web service in
addition to accessing it through HTTP, RMI/IIOP, and JMS. Web services
are implemented using the Java API for XML-based web services (JAX-WS).
A Jakarta EE application can also act as a client to web services, which
would be typical in network applications.</p>
</div>
<div class="paragraph">
<p>Web Services Description Language (WSDL) is an XML format that describes
web service interfaces. Web service consumers can dynamically parse a
WSDL document to determine the operations a web service provides and how
to execute them. Eclipse GlassFish distributes web services interface
descriptions using a registry that other applications can access through
the Java API for XML Registries (JAXR).</p>
</div>
</div>
<div class="sect3">
<h4 id="client-access"><a class="anchor" href="#client-access"></a>Client Access</h4>
<div class="paragraph">
<p>Clients can access Jakarta EE applications in several ways. Browser clients
access web applications using hypertext transfer protocol (HTTP). For
secure communication, browsers use the HTTP secure (HTTPS) protocol that
uses secure sockets layer (SSL).</p>
</div>
<div class="paragraph">
<p>Rich client applications running in the Application Client Container can
directly lookup and access Enterprise JavaBeans using an Object Request
Broker (ORB), Remote Method Invocation (RMI) and the internet inter-ORB
protocol (IIOP), or IIOP/SSL (secure IIOP). They can access applications
and web services using HTTP/HTTPS, JMS, and JAX-WS. They can use JMS to
send messages to and receive messages from applications and
message-driven beans.</p>
</div>
<div class="paragraph">
<p>Clients that conform to the Web Services-Interoperability (WS-I) Basic
Profile can access Jakarta EE web services. WS-I is an integral part of the
Jakarta EE standard and defines interoperable web services. It enables
clients written in any supporting language to access web services
deployed to Eclipse GlassFish.</p>
</div>
<div class="paragraph">
<p>The best access mechanism depends on the specific application and the
anticipated volume of traffic. Eclipse GlassFish supports separately
configurable listeners for HTTP, HTTPS, JMS, IIOP, and IIOP/SSL. You can
set up multiple listeners for each protocol for increased scalability
and reliability.</p>
</div>
<div class="paragraph">
<p>Jakarta EE applications can also act as clients of Jakarta EE components such
as Enterprise JavaBeans modules deployed on other servers, and can use
any of these access mechanisms.</p>
</div>
</div>
<div class="sect3">
<h4 id="external-systems-and-resources"><a class="anchor" href="#external-systems-and-resources"></a>External Systems and Resources</h4>
<div class="paragraph">
<p>On the Jakarta EE platform, an external system is called a resource. For
example, a database management system is a JDBC resource. Each resource
is uniquely identified and by its Java Naming and Directory Interface
(JNDI) name. Applications access external systems through the following
APIs and components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java Database Connectivity (JDBC) - A database management system
(DBMS) provides facilities for storing, organizing, and retrieving data.
Most business applications store data in relational databases, which
applications access via JDBC. Eclipse GlassFish includes the Java DB
database for use sample applications and application development and
prototyping, though it is not suitable for deployment. Eclipse GlassFish
provides certified JDBC drivers for connecting to major relational
databases. These drivers are suitable for deployment.</p>
</li>
<li>
<p>Java Message Service - Messaging is a method of communication between
software components or applications. A messaging client sends messages
to, and receives messages from, any other client via a messaging
provider that implements the Java Messaging Service (JMS) API. Eclipse GlassFish includes a high-performance JMS broker, Open Message Queue.</p>
</li>
<li>
<p>Jakarta EE Connectors - The Jakarta EE Connector architecture enables
integrating Jakarta EE applications and existing Enterprise Information
Systems (EIS). An application accesses an EIS through a portable Jakarta EE
component called a connector or resource adapter, analogous to using
JDBC driver to access an RDBMS. Resource adapters are distributed as
standalone Resource Adapter Archive (RAR) modules or included in Jakarta EE
application archives. As RARs, they are deployed like other Jakarta EE
components. Eclipse GlassFish includes evaluation resource adapters that
integrate with popular EIS.</p>
</li>
<li>
<p>Jakarta Mail - Through the Jakarta Mail API, applications can connect to a
Simple Mail Transport Protocol (SMTP) server to send email and to an
IMAP or POP3 server to receive email.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="glassfish-server-components"><a class="anchor" href="#glassfish-server-components"></a>Eclipse GlassFish Components</h3>
<div class="paragraph">
<p>This section describes the components in Eclipse GlassFish.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#server-instances">Server Instances</a></p>
</li>
<li>
<p><a href="#administrative-domains">Administrative Domains</a></p>
</li>
<li>
<p><a href="#clusters">Clusters</a></p>
</li>
<li>
<p><a href="#named-configurations">Named Configurations</a></p>
</li>
<li>
<p><a href="#http-load-balancer-plug-in">HTTP Load Balancer Plug-in</a></p>
</li>
<li>
<p><a href="#iiop-load-balancing-in-a-cluster">IIOP Load Balancing in a Cluster</a></p>
</li>
<li>
<p><a href="#message-queue-and-jms-resources">Message Queue and JMS Resources</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The administration tools, such as the browser-based Administration
Console, communicate with the domain administration server (DAS), which
in turn communicates with the server instances.</p>
</div>
<div class="sect3">
<h4 id="server-instances"><a class="anchor" href="#server-instances"></a>Server Instances</h4>
<div class="paragraph">
<p>A server instance is a Eclipse GlassFish running in a single
Java Virtual Machine (JVM) process.
Eclipse GlassFish is certified with Java platform, Standard Edition (Java SE) 11.</p>
</div>
<div class="paragraph">
<p>It is usually sufficient to create a single server instance on a
machine, since Eclipse GlassFish and accompanying JVM are both designed
to scale to multiple processors. However, it can be beneficial to create
multiple instances on one machine for application isolation and rolling
upgrades. In some cases, a large server with multiple instances can be
used in more than one administrative domain. The administration tools
makes it easy to create, delete, and manage server instances across
multiple machines.</p>
</div>
</div>
<div class="sect3">
<h4 id="administrative-domains"><a class="anchor" href="#administrative-domains"></a>Administrative Domains</h4>
<div class="paragraph">
<p>An administrative domain (or simply domain) is a group of server
instances that are administered together. A server instance belongs to a
single administrative domain. The instances in a domain can run on
different physical hosts.</p>
</div>
<div class="paragraph">
<p>You can create multiple domains from one installation of Eclipse GlassFish. By grouping server instances into domains, different
organizations and administrators can share a single Eclipse GlassFish
installation. Each domain has its own configuration, log files, and
application deployment areas that are independent of other domains.
Changing the configuration of one domain does not affect the
configurations of other domains. Likewise, deploying an application on
one domain does not deploy it or make it visible to any other domain.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>All hosts in a domain on which the DAS and Eclipse GlassFish instances
are running must have the same operating system.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="domain-administration-server-das"><a class="anchor" href="#domain-administration-server-das"></a>Domain Administration Server (DAS)</h5>
<div class="paragraph">
<p>A domain has one Domain Administration Server (DAS), a specially
designated Eclipse GlassFish instance that hosts the administrative
applications. The DAS authenticates the administrator, accepts requests
from administration tools, and communicates with server instances in the
domain to carry out the requests.</p>
</div>
<div class="paragraph">
<p>The administration tools are the <code>asadmin</code> command-line tool and the
browser-based Administration Console. Eclipse GlassFish also provides a
RESTful API for server administration. The administrator can view and
manage a single domain at a time, thus enforcing secure separation.</p>
</div>
<div class="paragraph">
<p>The DAS is also sometimes referred to as the admin server or default
server. It is referred to as the default server because it is the
default target for some administrative operations.</p>
</div>
<div class="paragraph">
<p>Since the DAS is a Eclipse GlassFish instance, it can also host Jakarta EE
applications for testing purposes. However, do not use it to host
production applications. You might want to deploy applications to the
DAS, for example, if the clusters and instances that will host the
production application have not yet been created.</p>
</div>
<div class="paragraph">
<p>The DAS keeps a repository containing the configuration of its domain
and all the deployed applications. If the DAS is inactive or down, there
is no impact on the performance or availability of active server
instances, however administrative changes cannot be made. In certain
cases, for security purposes, it may be useful to intentionally stop the
DAS process, for example to reboot the host operating system to install
a kernel patch or a hardware upgrade.</p>
</div>
<div class="paragraph">
<p>Administrative commands are provided to backup and restore the domain
configuration and applications. With the standard backup and restore
procedures, you can quickly restore working configurations. If the DAS
host fails, you must create a new DAS installation to restore the
previous domain configuration. For instructions, see
"<a href="administration-guide.html#administering-domains">Administering Domains</a>" in Eclipse GlassFish Administration Guide.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="clusters"><a class="anchor" href="#clusters"></a>Clusters</h4>
<div class="paragraph">
<p>A cluster is a named collection of server instances that share the same
applications, resources, and configuration information. You can group
server instances on different machines into one logical cluster and
administer them as one unit. You can easily control the lifecycle of a
multi-machine cluster with the DAS.</p>
</div>
<div class="paragraph">
<p>Clusters enable horizontal scalability, load balancing, and failover
protection. By definition, all the instances in a cluster have the same
resource and application configuration. When a server instance or a
machine in a cluster fails, the load balancer detects the failure,
redirects traffic from the failed instance to other instances in the
cluster, and recovers the user session state. Since the same
applications and resources are on all instances in the cluster, an
instance can failover to any other instance in the cluster.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>All hosts in a cluster on which the DAS and Eclipse GlassFish instances
are running must have the same operating system.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Clusters, domains, and instances are related as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An administrative domain can have zero or more clusters.</p>
</li>
<li>
<p>A cluster has one or more server instances.</p>
</li>
<li>
<p>A cluster belongs to a single domain.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="named-configurations"><a class="anchor" href="#named-configurations"></a>Named Configurations</h4>
<div class="paragraph">
<p>A named configuration is an abstraction that encapsulates Eclipse GlassFish property settings. Clusters and stand-alone server instances
reference a named configuration to get their property settings. With
named configurations, Jakarta EE containers' configurations are independent
of the physical machine on which they reside, except for particulars
such as IP address, port number, and amount of heap memory. Using named
configurations provides power and flexibility to Eclipse GlassFish
administration.</p>
</div>
<div class="paragraph">
<p>To apply configuration changes, you simply change the property settings
of the named configuration, and all the clusters and stand-alone
instances that reference it pick up the changes. You can only delete a
named configuration when all references to it have been removed. A
domain can contain multiple named configurations.</p>
</div>
<div class="paragraph">
<p>Eclipse GlassFish comes with a default configuration, called
default-config. The default configuration is optimized for developer
productivity.</p>
</div>
<div class="paragraph">
<p>You can create your own named configuration based on the default
configuration that you can customize for your own purposes. Use the
Administration Console and <code>asadmin</code> command line utility to create and
manage named configurations.</p>
</div>
</div>
<div class="sect3">
<h4 id="http-load-balancer-plug-in"><a class="anchor" href="#http-load-balancer-plug-in"></a>HTTP Load Balancer Plug-in</h4>
<div class="paragraph">
<p>The load balancer distributes the workload among multiple physical
machines, thereby increasing the overall throughput of the system. The
Eclipse GlassFish includes the load balancer plug-ins for Oracle iPlanet
Web Server, Oracle HTTP Server, Apache Web Server, and Microsoft
Internet Information Server.</p>
</div>
<div class="paragraph">
<p>The load balancer plug-in accepts HTTP and HTTPS requests and forwards
them to one of the Eclipse GlassFish instances in the cluster. Should an
instance fail, become unavailable (due to network faults), or become
unresponsive, requests are redirected to existing, available machines.
The load balancer can also recognize when a failed instance has
recovered and redistribute the load accordingly.</p>
</div>
<div class="paragraph">
<p>For simple stateless applications, a load-balanced cluster may be
sufficient. However, for mission-critical applications with session
state, use load balanced clusters with replicated session persistence.</p>
</div>
<div class="paragraph">
<p>To setup a system with load balancing, in addition to Eclipse GlassFish,
you must install a web server and the load-balancer plug-in. Then you
must:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create Eclipse GlassFish clusters that you want to participate in load
balancing.</p>
</li>
<li>
<p>Deploy applications to these load-balanced clusters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Server instances and clusters participating in load balancing have a
homogenous environment. Usually that means that the server instances
reference the same server configuration, can access the same physical
resources, and have the same applications deployed to them. Homogeneity
enables configuration consistency, and improves the ability to support a
production deployment.</p>
</div>
<div class="paragraph">
<p>Use the <code>asadmin</code> command-line tool to create a load balancer
configuration, add references to clusters and server instances to it,
enable the clusters for reference by the load balancer, enable
applications for load balancing, optionally create a health checker,
generate the load balancer configuration file, and finally copy the load
balancer configuration file to your web server <code>config</code> directory. An
administrator can create a script to automate this entire process.</p>
</div>
<div class="paragraph">
<p>For more details and complete configuration instructions, see
"<a href="ha-administration-guide.html#configuring-http-load-balancing">Configuring HTTP Load Balancing</a>" in Eclipse GlassFish High Availability Administration Guide.</p>
</div>
</div>
<div class="sect3">
<h4 id="session-persistence"><a class="anchor" href="#session-persistence"></a>Session Persistence</h4>
<div class="paragraph">
<p>Jakarta EE applications typically have significant amounts of session state
data. A web shopping cart is the classic example of a session state.
Also, an application can cache frequently-needed data in the session
object. In fact, almost all applications with significant user
interactions need to maintain a session state. Both HTTP sessions and
stateful session beans (SFSBs) have session state data.</p>
</div>
<div class="paragraph">
<p>While the session state is not as important as the transactional state
stored in a database, preserving the session state across server
failures can be important to end users. Eclipse GlassFish provides the
capability to save, or persist, this session state in a repository. If
the Eclipse GlassFish instance that is hosting the user session
experiences a failure, the session state can be recovered. The session
can continue without loss of information.</p>
</div>
<div class="paragraph">
<p>Eclipse GlassFish supports the following session persistence types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Memory</p>
</li>
<li>
<p>Replicated</p>
</li>
<li>
<p>File</p>
</li>
<li>
<p>Coherence</p>
</li>
<li>
<p>Web</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With memory persistence, the state is always kept in memory and does not
survive failure. With replicated persistence, Eclipse GlassFish uses
other server instances in the cluster as the persistence store for both
HTTP and SFSB sessions. With file persistence, Eclipse GlassFish
serializes session objects and stores them to the file system location
specified by session manager properties. For SFSBs, if replicated
persistence is not specified, Eclipse GlassFish stores state information
in the session-store subdirectory of this location. For more information
about Coherence*Web, see
<a href="http://download.oracle.com/docs/cd/E18686_01/coh.37/e18690/glassfish.html">Using
Coherence*Web with Eclipse GlassFish</a>
(<code><a href="http://docs.oracle.com/cd/E18686_01/coh.37/e18690/glassfish.html" class="bare">http://docs.oracle.com/cd/E18686_01/coh.37/e18690/glassfish.html</a></code>).</p>
</div>
<div class="paragraph">
<p>Checking an SFSB&#8217;s state for changes that need to be saved is called
checkpointing. When enabled, checkpointing generally occurs after any
transaction involving the SFSB is completed, even if the transaction
rolls back. For more information on developing stateful session beans,
see "<a href="application-development-guide.html#using-session-beans">Using Session Beans</a>" in Eclipse GlassFish Application Development Guide. For more information on
enabling SFSB failover, see "<a href="ha-administration-guide.html#stateful-session-bean-failover">Stateful Session Bean
Failover</a>" in Eclipse GlassFish High Availability
Administration Guide.</p>
</div>
<div class="paragraph">
<p>Apart from the number of requests being served by Eclipse GlassFish, the
session persistence configuration settings also affect the session
information in each request.</p>
</div>
<div class="paragraph">
<p>For more information on configuring session persistence, see
"<a href="ha-administration-guide.html#configuring-high-availability-session-persistence-and-failover">Configuring High Availability Session Persistence and
Failover</a>" in Eclipse GlassFish High Availability
Administration Guide.</p>
</div>
</div>
<div class="sect3">
<h4 id="iiop-load-balancing-in-a-cluster"><a class="anchor" href="#iiop-load-balancing-in-a-cluster"></a>IIOP Load Balancing in a Cluster</h4>
<div class="paragraph">
<p>With IIOP load balancing, IIOP client requests are distributed to
different server instances or name servers. The goal is to spread the
load evenly across the cluster, thus providing scalability. IIOP load
balancing combined with EJB clustering and availability features in
Eclipse GlassFish provides not only load balancing but also EJB failover.</p>
</div>
<div class="paragraph">
<p>There are two steps to IIOP failover and load balancing. The first step,
bootstrapping, is the process by which the client sets up the initial
naming context with one ORB in the cluster. The client attempts to
connect to one of the IIOP endpoints. When launching an application
client using the <code>appclient</code> script, you specify these endpoints using
the <code>-targetserver</code> option on the command line or <code>target-server</code>
elements in the <code>sun-acc.xml</code> configuration file. The client randomly
chooses one of these endpoints and tries to connect to it, trying other
endpoints if needed until one works.</p>
</div>
<div class="paragraph">
<p>The second step concerns sending messages to a specific EJB. By default,
all naming look-ups, and therefore all EJB accesses, use the cluster
instance chosen during bootstrapping. The client exchanges messages with
an EJB through the client ORB and server ORB. As this happens, the
server ORB updates the client ORB as servers enter and leave the
cluster. Later, if the client loses its connection to the server from
the previous step, the client fails over to some other server using its
list of currently active members. In particular, this cluster member
might have joined the cluster after the client made the initial
connection.</p>
</div>
<div class="paragraph">
<p>When a client performs a JNDI lookup for an object, the Naming Service
creates an <code>InitialContext</code> (IC) object associated with a particular
server instance. From then on, all lookup requests made using that IC
object are sent to the same server instance. All <code>EJBHome</code> objects
looked up with that <code>InitialContext</code> are hosted on the same target
server. Any bean references obtained henceforth are also created on the
same target host. This effectively provides load balancing, since all
clients randomize the list of live target servers when creating
<code>InitialContext</code> objects. If the target server instance goes down, the
lookup or EJB method invocation will failover to another server
instance.</p>
</div>
<div class="paragraph">
<p>Adding or deleting new instances to the cluster does not update the
existing client&#8217;s view of the cluster. You must manually update the
endpoints list on the client side.</p>
</div>
</div>
<div class="sect3">
<h4 id="message-queue-and-jms-resources"><a class="anchor" href="#message-queue-and-jms-resources"></a>Message Queue and JMS Resources</h4>
<div class="paragraph">
<p>The Open Message Queue (Message Queue) provides reliable, asynchronous
messaging for distributed applications. Message Queue is an enterprise
messaging system that implements the Java Message Service (JMS)
standard. Message Queue provides messaging for Jakarta EE application
components such as message-driven beans (MDBs).</p>
</div>
<div class="paragraph">
<p>Eclipse GlassFish implements the Java Message Service (JMS) API by
integrating Message Queue into Eclipse GlassFish. Eclipse GlassFish
includes the Enterprise version of Message Queue which has failover,
clustering and load balancing features.</p>
</div>
<div class="paragraph">
<p>For basic JMS administration tasks, use the Eclipse GlassFish
Administration Console and <code>asadmin</code> command-line utility.</p>
</div>
<div class="paragraph">
<p>For advanced tasks, including administering a Message Queue cluster, use
the tools provided in the as-install<code>/mq/bin</code> directory. For details
about administering Message Queue, see the <a href="https://eclipse-ee4j.github.io/openmq/guides//mq-admin-guide/toc.html">Open Message
Queue Administration Guide</a>.</p>
</div>
<div class="paragraph">
<p>For information on deploying JMS applications and Message Queue
clustering for message failover, see <a href="#planning-message-queue-broker-deployment">Planning
Message Queue Broker Deployment</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-roadmap-for-high-availability-of-glassfish-server"><a class="anchor" href="#configuration-roadmap-for-high-availability-of-glassfish-server"></a>Configuration Roadmap for High Availability of Eclipse GlassFish</h3>
<div class="paragraph">
<p>The following procedure lists the major tasks for configuring Eclipse GlassFish for high availability. The procedure also provides
cross-references to detailed instructions for performing each task.</p>
</div>
<div class="sect3">
<h4 id="to-configure-glassfish-server-for-high-availability"><a class="anchor" href="#to-configure-glassfish-server-for-high-availability"></a>To Configure Eclipse GlassFish for High Availability</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Determine your requirements and goals for performance and QoS.<br>
For more information, see the following documentation:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#establishing-performance-goals">Establishing Performance Goals</a></p>
</li>
<li>
<p><a href="#planning-the-network-configuration">Planning the Network Configuration</a></p>
</li>
<li>
<p><a href="#planning-for-availability">Planning for Availability</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Size your system.<br>
For more information, see <a href="#design-decisions">Design Decisions</a>.</p>
</li>
<li>
<p>Install Eclipse GlassFish and related subcomponents such as a web server.<br>
For more information, see the following documentation:</p>
<div class="ulist">
<ul>
<li>
<p><a href="installation-guide.html#GSING">Eclipse GlassFish Installation Guide</a></p>
</li>
<li>
<p>Installation guides for related subcomponents, for example, Oracle
iPlanet Web Server 7.0.9 Installation and Migration Guide
(<code><a href="http://docs.oracle.com/cd/E19146-01/821-1832/index.html" class="bare">http://docs.oracle.com/cd/E19146-01/821-1832/index.html</a></code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>If you plan to administer your clusters centrally, set up secure
shell (SSH) for centralized administration.<br>
For more information, see "<a href="ha-administration-guide.html#enabling-centralized-administration-of-glassfish-server-instances">
Setting Up SSH for Centralized Administration</a>" in Eclipse GlassFish
High Availability Administration Guide.</p>
</li>
<li>
<p>Configure domains, nodes, clusters, Eclipse GlassFish instances, and
virtual servers as required.<br>
For more information, see the following documentation:</p>
<div class="ulist">
<ul>
<li>
<p>"<a href="administration-guide.html#administering-domains">Administering Domains</a>" in Eclipse GlassFish Administration Guide</p>
</li>
<li>
<p>"<a href="ha-administration-guide.html#administering-glassfish-server-nodes">Administering Eclipse GlassFish Nodes</a>" in Eclipse GlassFish High Availability Administration Guide</p>
</li>
<li>
<p>"<a href="ha-administration-guide.html#administering-glassfish-server-clusters">Administering Eclipse GlassFish Clusters</a>" in
Eclipse GlassFish High Availability Administration Guide</p>
</li>
<li>
<p>"<a href="ha-administration-guide.html#administering-glassfish-server-instances">Administering Eclipse GlassFish Instances</a>" in
Eclipse GlassFish High Availability Administration Guide</p>
</li>
<li>
<p>"<a href="administration-guide.html#administering-virtual-servers">Administering Virtual Servers</a>" in Eclipse GlassFish Administration Guide</p>
</li>
</ul>
</div>
</li>
<li>
<p>Configure your load balancer.<br>
For more information, see "<a href="administration-guide.html#administering-mod_jk">Administering mod_jk</a>" in
Eclipse GlassFish Administration Guide.</p>
</li>
<li>
<p>Configure the web container and EJB container for replicated session persistence.<br>
For more information, see "<a href="ha-administration-guide.html#configuring-high-availability-session-persistence-and-failover">Configuring High
Availability Session Persistence and Failover</a>" in Eclipse GlassFish High Availability Administration Guide.</p>
</li>
<li>
<p>If you are using messaging extensively, configure Java Message
Service (JMS) clusters for failover .<br>
For more information, see the following documentation:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#planning-message-queue-broker-deployment">Planning Message Queue Broker Deployment</a></p>
</li>
<li>
<p>"<a href="ha-administration-guide.html#configuring-java-message-service-high-availability">Configuring Java Message Service High Availability</a>"
in Eclipse GlassFish High Availability Administration
Guide</p>
</li>
<li>
<p><a href="https://eclipse-ee4j.github.io/openmq/guides//mq-admin-guide/toc.html">Open Message Queue Administration Guide</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Deploy applications and configure them for high availability and session failover.<br>
For more information, see the <a href="application-deployment-guide.html#GSDPG">Eclipse GlassFish Application Deployment Guide</a>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="planning-your-deployment"><a class="anchor" href="#planning-your-deployment"></a>2 Planning your Deployment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before deploying Eclipse GlassFish, first determine the performance and
availability goals, and then make decisions about the hardware, network,
and storage requirements accordingly.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#establishing-performance-goals">Establishing Performance Goals</a></p>
</li>
<li>
<p><a href="#planning-the-network-configuration">Planning the Network Configuration</a></p>
</li>
<li>
<p><a href="#planning-for-availability">Planning for Availability</a></p>
</li>
<li>
<p><a href="#design-decisions">Design Decisions</a></p>
</li>
<li>
<p><a href="#planning-message-queue-broker-deployment">Planning Message Queue Broker Deployment</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="establishing-performance-goals"><a class="anchor" href="#establishing-performance-goals"></a>Establishing Performance Goals</h3>
<div class="paragraph">
<p>At its simplest, high performance means maximizing throughput and
reducing response time. Beyond these basic goals, you can establish
specific goals by determining the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>What types of applications and services are deployed, and how do
clients access them?</p>
</li>
<li>
<p>Which applications and services need to be highly available?</p>
</li>
<li>
<p>Do the applications have session state or are they stateless?</p>
</li>
<li>
<p>What request capacity or throughput must the system support?</p>
</li>
<li>
<p>How many concurrent users must the system support?</p>
</li>
<li>
<p>What is an acceptable average response time for user requests?</p>
</li>
<li>
<p>What is the average think time between requests?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can calculate some of these metrics using a remote browser emulator
(RBE) tool, or web site performance and benchmarking software that
simulates expected application activity. Typically, RBE and benchmarking
products generate concurrent HTTP requests and then report the response
time for a given number of requests per minute. You can then use these
figures to calculate server activity.</p>
</div>
<div class="paragraph">
<p>The results of the calculations described in this chapter are not
absolute. Treat them as reference points to work against, as you
fine-tune the performance of Eclipse GlassFish and your applications.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#estimating-throughput">Estimating Throughput</a></p>
</li>
<li>
<p><a href="#estimating-load-on-glassfish-server-instances">Estimating Load on Eclipse GlassFish Instances</a></p>
</li>
<li>
<p><a href="#estimating-bandwidth-requirements">Estimating Bandwidth Requirements</a></p>
</li>
<li>
<p><a href="#estimating-peak-load">Estimating Peak Load</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="estimating-throughput"><a class="anchor" href="#estimating-throughput"></a>Estimating Throughput</h4>
<div class="paragraph">
<p>In broad terms, throughput measures the amount of work performed by
Eclipse GlassFish. For Eclipse GlassFish, throughput can be defined as the
number of requests processed per minute per server instance.</p>
</div>
<div class="paragraph">
<p>As described in the next section, Eclipse GlassFish throughput is a
function of many factors, including the nature and size of user
requests, number of users, and performance of Eclipse GlassFish instances
and back-end databases. You can estimate throughput on a single machine
by benchmarking with simulated workloads.</p>
</div>
<div class="paragraph">
<p>High availability applications incur additional overhead because they
periodically save session data. The amount of overhead depends on the
amount of data, how frequently it changes, and how often it is saved.
The first two factors depend on the application in question; the latter
is also affected by server settings.</p>
</div>
</div>
<div class="sect3">
<h4 id="estimating-load-on-glassfish-server-instances"><a class="anchor" href="#estimating-load-on-glassfish-server-instances"></a>Estimating Load on Eclipse GlassFish Instances</h4>
<div class="paragraph">
<p>Consider the following factors to estimate the load on Eclipse GlassFish
instances.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#maximum-number-of-concurrent-users">Maximum Number of Concurrent Users</a></p>
</li>
<li>
<p><a href="#think-time">Think Time</a></p>
</li>
<li>
<p><a href="#average-response-time">Average Response Time</a></p>
</li>
<li>
<p><a href="#requests-per-minute">Requests Per Minute</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="maximum-number-of-concurrent-users"><a class="anchor" href="#maximum-number-of-concurrent-users"></a>Maximum Number of Concurrent Users</h5>
<div class="paragraph">
<p>Users interact with an application through a client, such as a web
browser or Java program. Based on the user&#8217;s actions, the client
periodically sends requests to the Eclipse GlassFish. A user is
considered active as long as the user&#8217;s session has neither expired nor
been terminated. When estimating the number of concurrent users, include
all active users.</p>
</div>
<div class="paragraph">
<p>Initially, as the number of users increases, throughput increases
correspondingly. However, as the number of concurrent requests
increases, server performance begins to saturate, and throughput begins
to decline.</p>
</div>
<div class="paragraph">
<p>Identify the point at which adding concurrent users reduces the number
of requests that can be processed per minute. This point indicates when
optimal performance is reached and beyond which throughput start to
degrade. Generally, strive to operate the system at optimal throughput
as much as possible. You might need to add processing power to handle
additional load and increase throughput.</p>
</div>
</div>
<div class="sect4">
<h5 id="think-time"><a class="anchor" href="#think-time"></a>Think Time</h5>
<div class="paragraph">
<p>A user does not submit requests continuously. A user submits a request,
the server receives and processes the request, and then returns a
result, at which point the user spends some time before submitting a new
request. The time between one request and the next is called think time.</p>
</div>
<div class="paragraph">
<p>Think times are dependent on the type of users. For example,
machine-to-machine interaction such as for a web service typically has a
lower think time than that of a human user. You may have to consider a
mix of machine and human interactions to estimate think time.</p>
</div>
<div class="paragraph">
<p>Determining the average think time is important. You can use this
duration to calculate the number of requests that need to be completed
per minute, as well as the number of concurrent users the system can
support.</p>
</div>
</div>
<div class="sect4">
<h5 id="average-response-time"><a class="anchor" href="#average-response-time"></a>Average Response Time</h5>
<div class="paragraph">
<p>Response time refers to the amount of time Eclipse GlassFish takes to
return the results of a request to the user. The response time is
affected by factors such as network bandwidth, number of users, number
and type of requests submitted, and average think time.</p>
</div>
<div class="paragraph">
<p>In this section, response time refers to the mean, or average, response
time. Each type of request has its own minimal response time. However,
when evaluating system performance, base the analysis on the average
response time of all requests.</p>
</div>
<div class="paragraph">
<p>The faster the response time, the more requests per minute are being
processed. However, as the number of users on the system increases, the
response time starts to increase as well, even though the number of
requests per minute declines.</p>
</div>
<div class="paragraph">
<p>A system performance graph indicates that after a certain point,
requests per minute are inversely proportional to response time. The
sharper the decline in requests per minute, the steeper the increase in
response time.</p>
</div>
<div class="paragraph">
<p>The point of the peak load is the point at which requests per minute
start to decline. Prior to this point, response time calculations are
not necessarily accurate because they do not use peak numbers in the
formula. After this point, (because of the inversely proportional
relationship between requests per minute and response time), the
administrator can more accurately calculate response time using maximum
number of users and requests per minute.</p>
</div>
<div class="paragraph">
<p>Use the following formula to determine T<sub>response</sub>, the response time
(in seconds) at peak load:</p>
</div>
<div class="paragraph">
<p>T<sub>response</sub> = n/r - T<sub>think</sub></p>
</div>
<div class="paragraph">
<p>where</p>
</div>
<div class="ulist">
<ul>
<li>
<p>n is the number of concurrent users</p>
</li>
<li>
<p>r is the number requests per second the server receives</p>
</li>
<li>
<p>T<sub>think</sub> is the average think time (in seconds)</p>
<div class="paragraph">
<p>To obtain an accurate response time result, always include think time in
the equation.</p>
</div>
</li>
</ul>
</div>
<div id="fygam" class="paragraph">
<p>Example 2-1 Calculation of Response Time</p>
</div>
<div class="paragraph">
<p>If the following conditions exist:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maximum number of concurrent users, n, that the system can support at
peak load is 5,000.</p>
</li>
<li>
<p>Maximum number of requests, r, the system can process at peak load is
1,000 per second.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Average think time, T<sub>think</sub>, is three seconds per request.</p>
</div>
<div class="paragraph">
<p>Thus, the calculation of response time is:</p>
</div>
<div class="paragraph">
<p>T<sub>response</sub> = n/r - T<sub>think</sub> = (5000/ 1000) - 3 sec. = 5 - 3 sec.</p>
</div>
<div class="paragraph">
<p>Therefore, the response time is two seconds.</p>
</div>
<div class="paragraph">
<p>After the system&#8217;s response time has been calculated, particularly at
peak load, compare it to the acceptable response time for the
application. Response time, along with throughput, is one of the main
factors critical to Eclipse GlassFish performance.</p>
</div>
</div>
<div class="sect4">
<h5 id="requests-per-minute"><a class="anchor" href="#requests-per-minute"></a>Requests Per Minute</h5>
<div class="paragraph">
<p>If you know the number of concurrent users at any given time, the
response time of their requests, and the average user think time, then
you can calculate the number of requests per minute. Typically, start by
estimating the number of concurrent users that are on the system.</p>
</div>
<div class="paragraph">
<p>For example, after running web site performance software, the
administrator concludes that the average number of concurrent users
submitting requests on an online banking web site is 3,000. This number
depends on the number of users who have signed up to be members of the
online bank, their banking transaction behavior, the time of the day or
week they choose to submit requests, and so on.</p>
</div>
<div class="paragraph">
<p>Therefore, knowing this information enables you to use the requests per
minute formula described in this section to calculate how many requests
per minute your system can handle for this user base. Since requests per
minute and response time become inversely proportional at peak load,
decide if fewer requests per minute is acceptable as a trade-off for
better response time, or alternatively, if a slower response time is
acceptable as a trade-off for more requests per minute.</p>
</div>
<div class="paragraph">
<p>Experiment with the requests per minute and response time thresholds
that are acceptable as a starting point for fine-tuning system
performance. Thereafter, decide which areas of the system require
adjustment.</p>
</div>
<div class="paragraph">
<p>Solving for r in the equation in the previous section gives:</p>
</div>
<div class="paragraph">
<p>r = n/(T<sub>response</sub> + T<sub>think</sub>)</p>
</div>
<div id="fygaj" class="paragraph">
<p>Example 2-2 Calculation of Requests Per Second</p>
</div>
<div class="paragraph">
<p>For the values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>n = 2,800 concurrent users</p>
</li>
<li>
<p>T<sub>response</sub> = 1 (one second per request average response time)</p>
</li>
<li>
<p>T<sub>think</sub> = 3, (three seconds average think time)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The calculation for the number of requests per second is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>r = 2800 / (1+3) = 700</code></pre>
</div>
</div>
<div class="paragraph">
<p>Therefore, the number of requests per second is 700 and the number of
requests per minute is 42000.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="planning-the-network-configuration"><a class="anchor" href="#planning-the-network-configuration"></a>Planning the Network Configuration</h3>
<div class="paragraph">
<p>When planning how to integrate the Eclipse GlassFish into the network,
estimate the bandwidth requirements and plan the network in such a way
that it can meet users' performance requirements.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#setting-up-traffic-separation">Setting Up Traffic Separation</a></p>
</li>
<li>
<p><a href="#estimating-bandwidth-requirements">Estimating Bandwidth Requirements</a></p>
</li>
<li>
<p><a href="#calculating-bandwidth-required">Calculating Bandwidth Required</a></p>
</li>
<li>
<p><a href="#estimating-peak-load">Estimating Peak Load</a></p>
</li>
<li>
<p><a href="#choosing-network-cards">Choosing Network Cards</a></p>
</li>
<li>
<p><a href="#identifying-failure-classes">Identifying Failure Classes</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="setting-up-traffic-separation"><a class="anchor" href="#setting-up-traffic-separation"></a>Setting Up Traffic Separation</h4>
<div class="paragraph">
<p>You can separate external traffic, such as client requests, from the
internal traffic, such as session state failover, database transactions,
and messaging. Traffic separation enables you to plan a network better
and augment certain parts of the network, as required.</p>
</div>
<div class="paragraph">
<p>To separate the traffic, run each server instance on a multi-homed
machine. A multi-homed machine has two IP addresses belonging to
different networks, an external IP and an internal IP. The objective is
to expose only the external IP to user requests. The internal IP is used
only by the cluster instances for internal communication. For details,
see "<a href="ha-administration-guide.html#using-the-multi-homing-feature-with-gms">Using the Multi-Homing Feature With GMS</a>" in
Eclipse GlassFish High Availability Administration
Guide.</p>
</div>
<div class="paragraph">
<p>To plan for traffic on both networks, see <a href="#estimating-bandwidth-requirements">Estimating
Bandwidth Requirements</a>. For external networks, follow the guidelines in
<a href="#calculating-bandwidth-required">Calculating Bandwidth Required</a> and <a href="#estimating-peak-load">Estimating
Peak Load</a>. To size the interfaces for internal networks, see
<a href="#choosing-network-cards">Choosing Network Cards</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="estimating-bandwidth-requirements"><a class="anchor" href="#estimating-bandwidth-requirements"></a>Estimating Bandwidth Requirements</h4>
<div class="paragraph">
<p>To decide on the desired size and bandwidth of the network, first
determine the network traffic and identify its peak. Check if there is a
particular hour, day of the week, or day of the month when overall
volume peaks, and then determine the duration of that peak.</p>
</div>
<div class="paragraph">
<p>During peak load times, the number of packets in the network is at its
highest level. In general, if you design for peak load, scale your
system with the goal of handling 100 percent of peak volume. Bear in
mind, however, that any network behaves unpredictably and that despite
your scaling efforts, it might not always be able handle 100 percent of
peak volume.</p>
</div>
<div class="paragraph">
<p>For example, assume that at peak load, five percent of users
occasionally do not have immediate network access when accessing
applications deployed on Eclipse GlassFish. Of that five percent,
estimate how many users retry access after the first attempt. Again, not
all of those users might get through, and of that unsuccessful portion,
another percentage will retry. As a result, the peak appears longer
because peak use is spread out over time as users continue to attempt
access.</p>
</div>
</div>
<div class="sect3">
<h4 id="calculating-bandwidth-required"><a class="anchor" href="#calculating-bandwidth-required"></a>Calculating Bandwidth Required</h4>
<div class="paragraph">
<p>Based on the calculations made in <a href="#establishing-performance-goals">Establishing Performance
Goals</a>, determine the additional bandwidth required for deploying
Eclipse GlassFish at your site.</p>
</div>
<div class="paragraph">
<p>Depending on the method of access (T-1 lines, ADSL, cable modem, and so
on), calculate the amount of increased bandwidth required to handle your
estimated load. For example, suppose your site uses T-1 or higher-speed
T-3 lines. Given their bandwidth, estimate how many lines are needed on
the network, based on the average number of requests generated per
second at your site and the maximum peak load. Calculate these figures
using a web site analysis and monitoring tool.</p>
</div>
<div id="fygad" class="paragraph">
<p>Example 2-3 Calculation of Bandwidth Required</p>
</div>
<div class="paragraph">
<p>A single T-1 line can handle 1.544 Mbps. Therefore, a network of four
T-1 lines can handle approximately 6 Mbps of data. Assuming that the
average HTML page sent back to a client is 30 kilobytes (KB), this
network of four T-1 lines can handle the following traffic per second:</p>
</div>
<div class="paragraph">
<p>6,176,000 bits/10 bits = 772,000 bytes per second</p>
</div>
<div class="paragraph">
<p>772,000 bytes per second/30 KB = approximately 25 concurrent response
pages per second.</p>
</div>
<div class="paragraph">
<p>With traffic of 25 pages per second, this system can handle 90,000 pages
per hour (25 x 60 seconds x 60 minutes), and therefore 2,160,000 pages
per day maximum, assuming an even load throughout the day. If the
maximum peak load is greater than this, increase the bandwidth
accordingly.</p>
</div>
</div>
<div class="sect3">
<h4 id="estimating-peak-load"><a class="anchor" href="#estimating-peak-load"></a>Estimating Peak Load</h4>
<div class="paragraph">
<p>Having an even load throughout the day is probably not realistic. You
need to determine when the peak load occurs, how long it lasts, and what
percentage of the total load is the peak load.</p>
</div>
<div id="fygai" class="paragraph">
<p>Example 2-4 Calculation of Peak Load</p>
</div>
<div class="paragraph">
<p>If the peak load lasts for two hours and takes up 30 percent of the
total load of 2,160,000 pages, this implies that 648,000 pages must be
carried over the T-1 lines during two hours of the day.</p>
</div>
<div class="paragraph">
<p>Therefore, to accommodate peak load during those two hours, increase the
number of T-1 lines according to the following calculations:</p>
</div>
<div class="paragraph">
<p>648,000 pages/120 minutes = 5,400 pages per minute</p>
</div>
<div class="paragraph">
<p>5,400 pages per minute/60 seconds = 90 pages per second</p>
</div>
<div class="paragraph">
<p>If four lines can handle 25 pages per second, then approximately four
times that many pages requires four times that many lines, in this case
16 lines. The 16 lines are meant for handling the realistic maximum of a
30 percent peak load. Obviously, the other 70 percent of the load can be
handled throughout the rest of the day by these many lines.</p>
</div>
</div>
<div class="sect3">
<h4 id="choosing-network-cards"><a class="anchor" href="#choosing-network-cards"></a>Choosing Network Cards</h4>
<div class="paragraph">
<p>For greater bandwidth and optimal network performance, use at least 100
Mbps Ethernet cards or, preferably, 1 Gbps Ethernet cards between
servers hosting Eclipse GlassFish.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="planning-for-availability"><a class="anchor" href="#planning-for-availability"></a>Planning for Availability</h3>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#rightsizing-availability">Rightsizing Availability</a></p>
</li>
<li>
<p><a href="#using-clusters-to-improve-availability">Using Clusters to Improve Availability</a></p>
</li>
<li>
<p><a href="#adding-redundancy-to-the-system">Adding Redundancy to the System</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="rightsizing-availability"><a class="anchor" href="#rightsizing-availability"></a>Rightsizing Availability</h4>
<div class="paragraph">
<p>To plan availability of systems and applications, assess the
availability needs of the user groups that access different
applications. For example, external fee-paying users and business
partners often have higher quality of service (QoS) expectations than
internal users. Thus, it may be more acceptable to internal users for an
application feature, application, or server to be unavailable than it
would be for paying external customers.</p>
</div>
<div class="paragraph">
<p>There is an increasing cost and complexity to mitigating against
decreasingly probable events. At one end of the continuum, a simple
load-balanced cluster can tolerate localized application, middleware,
and hardware failures. At the other end of the scale, geographically
distinct clusters can mitigate against major catastrophes affecting the
entire data center.</p>
</div>
<div class="paragraph">
<p>To realize a good return on investment, it often makes sense to identify
availability requirements of features within an application. For
example, it may not be acceptable for an insurance quotation system to
be unavailable (potentially turning away new business), but brief
unavailability of the account management function (where existing
customers can view their current coverage) is unlikely to turn away
existing customers.</p>
</div>
</div>
<div class="sect3">
<h4 id="using-clusters-to-improve-availability"><a class="anchor" href="#using-clusters-to-improve-availability"></a>Using Clusters to Improve Availability</h4>
<div class="paragraph">
<p>At the most basic level, a cluster is a group of Eclipse GlassFish
instancesâoften hosted on multiple physical serversâthat appear to
clients as a single instance. This provides horizontal scalability as
well as higher availability than a single instance on a single machine.
This basic level of clustering works in conjunction with the HTTP load
balancer plug-in, which accepts HTTP and HTTPS requests and forwards
them to one of the instances in the cluster. The ORB and integrated JMS
brokers also perform load balancing to Eclipse GlassFish clusters. If an
instance fails, becomes unavailable (due to network faults), or becomes
unresponsive, requests are redirected only to existing, available
machines. The load balancer can also recognize when a failed instance
has recovered and redistribute load accordingly.</p>
</div>
</div>
<div class="sect3">
<h4 id="adding-redundancy-to-the-system"><a class="anchor" href="#adding-redundancy-to-the-system"></a>Adding Redundancy to the System</h4>
<div class="paragraph">
<p>One way to achieve high availability is to add hardware and software
redundancy to the system. When one unit fails, the redundant unit takes
over. This is also referred to as fault tolerance. In general, to
maximize high availability, determine and remove every possible point of
failure in the system.</p>
</div>
<div class="sect4">
<h5 id="identifying-failure-classes"><a class="anchor" href="#identifying-failure-classes"></a>Identifying Failure Classes</h5>
<div class="paragraph">
<p>The level of redundancy is determined by the failure classes (types of
failure) that the system needs to tolerate. Some examples of failure
classes are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>System process</p>
</li>
<li>
<p>Machine</p>
</li>
<li>
<p>Power supply</p>
</li>
<li>
<p>Disk</p>
</li>
<li>
<p>Network failures</p>
</li>
<li>
<p>Building fires or other preventable disasters</p>
</li>
<li>
<p>Unpredictable natural catastrophes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Duplicated system processes tolerate single system process failures, as
well as single machine failures. Attaching the duplicated mirrored
(paired) machines to different power supplies tolerates single power
failures. By keeping the mirrored machines in separate buildings, a
single-building fire can be tolerated. By keeping them in separate
geographical locations, natural catastrophes like earthquakes can be
tolerated.</p>
</div>
</div>
<div class="sect4">
<h5 id="planning-failover-capacity"><a class="anchor" href="#planning-failover-capacity"></a>Planning Failover Capacity</h5>
<div class="paragraph">
<p>Failover capacity planning implies deciding how many additional servers
and processes you need to add to the Eclipse GlassFish deployment so that
in the event of a server or process failure, the system can seamlessly
recover data and continue processing. If your system gets overloaded, a
process or server failure might result, causing response time
degradation or even total loss of service. Preparing for such an
occurrence is critical to successful deployment.</p>
</div>
<div class="paragraph">
<p>To maintain capacity, especially at peak loads, add spare machines
running Eclipse GlassFish instances to the existing deployment.</p>
</div>
<div class="paragraph">
<p>For example, consider a system with two machines running one Eclipse GlassFish instance each. Together, these machines handle a peak load of 300
requests per second. If one of these machines becomes unavailable, the
system will be able to handle only 150 requests, assuming an even load
distribution between the machines. Therefore, half the requests during
peak load will not be served.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="design-decisions"><a class="anchor" href="#design-decisions"></a>Design Decisions</h3>
<div class="paragraph">
<p>Design decisions include whether you are designing the system for peak
or steady-state load, the number of machines in various roles and their
sizes, and the size of the administration thread pool.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#designing-for-peak-or-steady-state-load">Designing for Peak or Steady State Load</a></p>
</li>
<li>
<p><a href="#system-sizing">System Sizing</a></p>
</li>
<li>
<p><a href="#sizing-the-administration-thread-pool">Sizing the Administration Thread Pool</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="designing-for-peak-or-steady-state-load"><a class="anchor" href="#designing-for-peak-or-steady-state-load"></a>Designing for Peak or Steady State Load</h4>
<div class="paragraph">
<p>In a typical deployment, there is a difference between steady state and
peak workloads:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the system is designed to handle peak load, it can sustain the
expected maximum load of users and requests without degrading response
time. This implies that the system can handle extreme cases of expected
system load. If the difference between peak load and steady state load
is substantial, designing for peak loads can mean spending money on
resources that are often idle.</p>
</li>
<li>
<p>If the system is designed to handle steady state load, it does not
have all the resources required to handle the expected peak load. Thus,
the system has a slower response time when peak load occurs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>How often the system is expected to handle peak load will determine
whether you want to design for peak load or for steady state.</p>
</div>
<div class="paragraph">
<p>If peak load occurs oftenâsay, several times per dayâit may be
worthwhile to expand capacity to handle it. If the system operates at
steady state 90 percent of the time, and at peak only 10 percent of the
time, then it may be preferable to deploy a system designed around
steady state load. This implies that the system&#8217;s response time will be
slower only 10 percent of the time. Decide if the frequency or duration
of time that the system operates at peak justifies the need to add
resources to the system.</p>
</div>
</div>
<div class="sect3">
<h4 id="system-sizing"><a class="anchor" href="#system-sizing"></a>System Sizing</h4>
<div class="paragraph">
<p>Based on the load on the Eclipse GlassFish instances and failover
requirements, you can determine the number of applications server
instances (hosts) needed. Evaluate your environment on the basis of the
factors explained in <a href="#estimating-load-on-glassfish-server-instances">Estimating Load on Eclipse GlassFish
Instances</a> to each Eclipse GlassFish instance, although each instance can
use more than one Central Processing Unit (CPU).</p>
</div>
</div>
<div class="sect3">
<h4 id="sizing-the-administration-thread-pool"><a class="anchor" href="#sizing-the-administration-thread-pool"></a>Sizing the Administration Thread Pool</h4>
<div class="paragraph">
<p>The default <code>admin-thread-pool</code> size of 50 should be adequate for most
cluster deployments. If you have unusually large clusters, you may need
to increase this thread pool size. In this case, set the
<code>max-thread-pool-size</code> attribute to the number of instances in your
largest cluster, but not larger than the number of incoming
synchronization requests that the DAS can handle.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="planning-message-queue-broker-deployment"><a class="anchor" href="#planning-message-queue-broker-deployment"></a>Planning Message Queue Broker Deployment</h3>
<div class="paragraph">
<p>The Java Message Service (JMS) API is a messaging standard that allows
Jakarta EE applications and components to create, send, receive, and read
messages. It enables distributed communication that is loosely coupled,
reliable, and asynchronous. Message Queue, which implements JMS, is
integrated with Eclipse GlassFish, enabling you to create components that
send and receive JMS messages, including message-driven beans (MDBs).</p>
</div>
<div class="paragraph">
<p>Message Queue is integrated with Eclipse GlassFish using a resource
adapter also known as a connector module. A resource adapter is a Java
EE component defined according to the Jakarta EE Connector Architecture
(JCA) Specification. This specification defines a standardized way in
which application servers such as Eclipse GlassFish can integrate with
enterprise information systems such as JMS providers. Eclipse GlassFish
includes a resource adapter that integrates with its own JMS provider,
Message Queue. To use a different JMS provider, you must obtain and
deploy a suitable resource adapter that is designed to integrate with
it.</p>
</div>
<div class="paragraph">
<p>Creating a JMS resource in Eclipse GlassFish using the Administration
Console creates a preconfigured connector resource that uses the Message
Queue resource adapter. To create JMS Resources that use any other
resource adapter (including <code>GenericJMSRA</code>), you must create them under
the Connectors node in the Administration Console.</p>
</div>
<div class="paragraph">
<p>In addition to using resource adapter APIs, Eclipse GlassFish uses
additional Message Queue APIs to provide better integration with Message
Queue. This tight integration enables features such as connector
failover, load balancing of outbound connections, and load balancing of
inbound messages to MDBs. These features enable you to make messaging
traffic fault-tolerant and highly available.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#multi-broker-clusters">Multi-Broker Clusters</a></p>
</li>
<li>
<p><a href="#configuring-glassfish-server-to-use-message-queue-brokers">Configuring Eclipse GlassFish to Use Message Queue Brokers</a></p>
</li>
<li>
<p><a href="#example-deployment-scenarios">Example Deployment Scenarios</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="multi-broker-clusters"><a class="anchor" href="#multi-broker-clusters"></a>Multi-Broker Clusters</h4>
<div class="paragraph">
<p>Message Queue supports using multiple interconnected broker instances
known as a broker cluster. With broker clusters, client connections are
distributed across all the brokers in the cluster. Clustering provides
horizontal scalability and improves availability.</p>
</div>
<div class="paragraph">
<p>A single message broker scales to about eight CPUs and provides
sufficient throughput for typical applications. If a broker process
fails, it is automatically restarted. However, as the number of clients
connected to a broker increases, and as the number of messages being
delivered increases, a broker will eventually exceed limitations such as
number of file descriptors and memory.</p>
</div>
<div class="paragraph">
<p>Having multiple brokers in a cluster rather than a single broker enables
you to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provide messaging services despite hardware failures on a single machine.</p>
</li>
<li>
<p>Minimize downtime while performing system maintenance.</p>
</li>
<li>
<p>Accommodate workgroups having different user repositories.</p>
</li>
<li>
<p>Deal with firewall restrictions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Message Queue allows you to create conventional or enhanced broker
clusters. Conventional broker clusters offer service availability.
Enhanced broker clusters offer both service and data availability. For
more information, see "<a href="https://eclipse-ee4j.github.io/openmq/guides//mq-admin-guide/toc.html/broker-clusters.html#GMADG00041">Configuring and Managing Broker
Clusters</a>" in Open Message Queue Administration Guide.</p>
</div>
<div class="paragraph">
<p>In a conventional cluster, having multiple brokers does not ensure that
transactions in progress at the time of a broker failure will continue
on the alternate broker. Although Message Queue reestablishes a failed
connection with a different broker in a cluster, transactions owned by
the failed broker are not available until it restarts. Except for failed
in-progress transactions, user applications can continue on the
failed-over connection. Service failover is thus ensured.</p>
</div>
<div class="paragraph">
<p>In an enhanced cluster, transactions and persistent messages owned by
the failed broker are taken over by another running broker in the
cluster and non-prepared transactions are rolled back. Data failover is
ensured for prepared transactions and persisted messages.</p>
</div>
<div class="sect4">
<h5 id="master-broker-and-client-synchronization-for-conventional-clusters"><a class="anchor" href="#master-broker-and-client-synchronization-for-conventional-clusters"></a>Master Broker and Client Synchronization for Conventional Clusters</h5>
<div class="paragraph">
<p>In a configuration for a conventional broker cluster, each destination
is replicated on all of the brokers in a cluster. Each broker knows
about message consumers that are registered for destinations on all
other brokers. Each broker can therefore route messages from its own
directly-connected message producers to remote message consumers, and
deliver messages from remote producers to its own directly-connected consumers.</p>
</div>
<div class="paragraph">
<p>In a cluster configuration, the broker to which each message producer is
directly connected performs the routing for messages sent to it by that
producer. Hence, a persistent message is both stored and routed by the
message&#8217;s home broker.</p>
</div>
<div class="paragraph">
<p>Whenever an administrator creates or destroys a destination on a broker,
this information is automatically propagated to all other brokers in a
cluster. Similarly, whenever a message consumer is registered with its
home broker, or whenever a consumer is disconnected from its home
brokerâeither explicitly or because of a client or network failure, or
because its home broker goes downâthe relevant information about the
consumer is propagated throughout the cluster. In a similar fashion,
information about durable subscriptions is also propagated to all
brokers in a cluster.</p>
</div>
<div class="paragraph">
<p>A shared database of cluster change records can be configured as an
alternative to using a master broker. For more information, see
"<a href="https://eclipse-ee4j.github.io/openmq/guides//mq-admin-guide/toc.html/broker-clusters.html#GMADG00041">Configuring and Managing Broker Clusters</a>" in Open
Message Queue Administration Guide and "<a href="ha-administration-guide.html#using-message-queue-broker-clusters-with-glassfish-server">Using Message
Queue Broker Clusters With Eclipse GlassFish</a>" in Eclipse GlassFish High Availability Administration Guide.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuring-glassfish-server-to-use-message-queue-brokers"><a class="anchor" href="#configuring-glassfish-server-to-use-message-queue-brokers"></a>Configuring Eclipse GlassFish to Use Message Queue Brokers</h4>
<div class="paragraph">
<p>By default, Message Queue brokers (JMS hosts) run in the same JVM as the
Eclipse GlassFish process. However, Message Queue brokers (JMS hosts) can
be configured to run in a separate JVM from the Eclipse GlassFish
process. This allows multiple Eclipse GlassFish instances or clusters to
share the same set of Message Queue brokers.</p>
</div>
<div class="paragraph">
<p>The Eclipse GlassFish&#8217;s Java Message Service represents the connector
module (resource adapter) for Message Queue. You can manage the Java
Message Service through the Administration Console or the <code>asadmin</code>
command-line utility.</p>
</div>
<div class="paragraph">
<p>In Eclipse GlassFish, a JMS host refers to a Message Queue broker. The
Eclipse GlassFish&#8217;s Java Message Service configuration contains a JMS
Host List (also called AddressList) that contains all the JMS hosts that
will be used.</p>
</div>
<div class="sect4">
<h5 id="java-message-service-type"><a class="anchor" href="#java-message-service-type"></a>Java Message Service Type</h5>
<div class="paragraph">
<p>There are three types of integration between Eclipse GlassFish and
Message Queue brokers: embedded, local, and remote. You can set this
type attribute on the Administration Console&#8217;s Java Message Service page.</p>
</div>
<div id="embedded-java-message-service" class="paragraph">
<p>Embedded Java Message Service</p>
</div>
<div class="paragraph">
<p>If the Type attribute is EMBEDDED, Eclipse GlassFish and the JMS broker
are colocated in the same virtual machine. The JMS Service is started
in-process and managed by Eclipse GlassFish. In EMBEDDED mode, JMS
operations on stand-alone server instances bypass the networking stack,
which leads to performance optimization. The EMBEDDED type is most
suitable for stand-alone Eclipse GlassFish instances. EMBEDDED mode is
not supported for enhanced broker clusters.</p>
</div>
<div class="paragraph">
<p>With the EMBEDDED type, use the Start Arguments attribute to specify
Message Queue broker startup parameters.</p>
</div>
<div class="paragraph">
<p>With the EMBEDDED type, make sure the Java heap size is large enough to
allow Eclipse GlassFish and Message Queue to run in the same virtual machine.</p>
</div>
<div id="local-java-message-service" class="paragraph">
<p>Local Java Message Service</p>
</div>
<div class="paragraph">
<p>If the Type attribute is LOCAL, Eclipse GlassFish starts and stops the
Message Queue broker. When Eclipse GlassFish starts up, it starts the
Message Queue broker specified as the Default JMS host. Likewise, when
the Eclipse GlassFish instance shuts down, it shuts down the Message
Queue broker. The LOCAL type is most suitable for use with enhanced
broker clusters, and for other cases where the administrator prefers the
use of separate JVMs.</p>
</div>
<div class="paragraph">
<p>With the LOCAL type, use the Start Arguments attribute to specify
Message Queue broker startup parameters.</p>
</div>
<div id="remote-java-message-service" class="paragraph">
<p>Remote Java Message Service</p>
</div>
<div class="paragraph">
<p>If the Type attribute is REMOTE, Eclipse GlassFish uses an externally
configured broker or broker cluster. In this case, you must start and
stop Message Queue brokers separately from Eclipse GlassFish, and use
Message Queue tools to configure and tune the broker or broker cluster.
The REMOTE type is most suitable for brokers running on different
machines from the server instances (to share the load among more
machines or for higher availability), or for using a different number of
brokers and server instances.</p>
</div>
<div class="paragraph">
<p>With the REMOTE type, you must specify Message Queue broker startup
parameters using Message Queue tools. The Start Arguments attribute is ignored.</p>
</div>
</div>
<div class="sect4">
<h5 id="managing-jms-with-the-administration-console"><a class="anchor" href="#managing-jms-with-the-administration-console"></a>Managing JMS with the Administration Console</h5>
<div class="paragraph">
<p>In the Administration Console, you can set JMS properties using the Java
Message Service node for a particular configuration. You can set
properties such as Reconnect Interval and Reconnect Attempts. For more
information, see "<a href="administration-guide.html#administering-the-java-message-service-jms">Administering the Java Message
Service (JMS)</a>" in Eclipse GlassFish Administration
Guide.</p>
</div>
<div class="paragraph">
<p>The JMS Hosts node under the Java Message Service node contains a list
of JMS hosts. You can add and remove hosts from the list. For each host,
you can set the host name, port number, and the administration user name
and password. By default, the JMS Hosts list contains one Message Queue
broker, called "default_JMS_host," that represents the local Message
Queue broker integrated with Eclipse GlassFish.</p>
</div>
<div class="paragraph">
<p>In REMOTE mode, configure the JMS Hosts list to contain all the Message
Queue brokers in the cluster. For example, to set up a cluster
containing three Message Queue brokers, add a JMS host within the Java
Message Service for each one. Message Queue clients use the
configuration information in the Java Message Service to communicate
with Message Queue broker.</p>
</div>
</div>
<div class="sect4">
<h5 id="managing-jms-with-asadmin"><a class="anchor" href="#managing-jms-with-asadmin"></a>Managing JMS with asadmin</h5>
<div class="paragraph">
<p>In addition to the Administration Console, you can use the <code>asadmin</code>
command-line utility to manage the Java Message Service and JMS hosts.
Use the following <code>asadmin</code> commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configuring Java Message Service attributes: <code>asadmin set</code></p>
</li>
<li>
<p>Managing JMS hosts:</p>
<div class="ulist">
<ul>
<li>
<p><code>asadmin create-jms-host</code></p>
</li>
<li>
<p><code>asadmin delete-jms-host</code></p>
</li>
<li>
<p><code>asadmin list-jms-hosts</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Managing JMS resources:</p>
<div class="ulist">
<ul>
<li>
<p><code>asadmin create-jms-resource</code></p>
</li>
<li>
<p><code>asadmin delete-jms-resource</code></p>
</li>
<li>
<p><code>asadmin list-jms-resources</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on these commands, see the <a href="reference-manual.html#GSRFM">Eclipse GlassFish Reference Manual</a> or the corresponding man pages.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="default-jms-host"><a class="anchor" href="#default-jms-host"></a>Default JMS Host</h5>
<div class="paragraph">
<p>You can specify the default JMS Host in the Administration Console Java
Message Service page. If the Java Message Service type is LOCAL,
Eclipse GlassFish starts the default JMS host when the Eclipse GlassFish
instance starts. If the Java Message Service type is EMBEDDED, the
default JMS host is started lazily when needed.</p>
</div>
<div class="paragraph">
<p>In REMOTE mode, to use a Message Queue broker cluster, delete the
default JMS host, then add all the Message Queue brokers in the cluster
as JMS hosts. In this case, the default JMS host becomes the first JMS
host in the JMS host list.</p>
</div>
<div class="paragraph">
<p>You can also explicitly set the default JMS host to one of the JMS
hosts. When the Eclipse GlassFish uses a Message Queue cluster, the
default JMS host executes Message Queue-specific commands. For example,
when a physical destination is created for a Message Queue broker
cluster, the default JMS host executes the command to create the
physical destinations, but all brokers in the cluster use the physical destination.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="example-deployment-scenarios"><a class="anchor" href="#example-deployment-scenarios"></a>Example Deployment Scenarios</h4>
<div class="paragraph">
<p>To accommodate your messaging needs, modify the Java Message Service and
JMS host list to suit your deployment, performance, and availability needs.
The following sections describe some typical scenarios.</p>
</div>
<div class="paragraph">
<p>For best availability, deploy Message Queue brokers and Eclipse GlassFishs on different machines, if messaging needs are not just with
Eclipse GlassFish. Another option is to run a Eclipse GlassFish instance
and a Message Queue broker instance on each machine until there is
sufficient messaging capacity.</p>
</div>
<div class="sect4">
<h5 id="default-deployment"><a class="anchor" href="#default-deployment"></a>Default Deployment</h5>
<div class="paragraph">
<p>Installing the Eclipse GlassFish automatically creates a domain
administration server (DAS). By default, the Java Message Service type
for the DAS is EMBEDDED. So, starting the DAS also starts its default
Message Queue broker.</p>
</div>
<div class="paragraph">
<p>Creating a new domain also creates a new broker. By default, when you
add a stand-alone server instance or a cluster to the domain, its Java
Message Service is configured as EMBEDDED and its default JMS host is
the broker started by the DAS.</p>
</div>
</div>
<div class="sect4">
<h5 id="using-a-message-queue-broker-cluster-with-a-glassfish-server-cluster"><a class="anchor" href="#using-a-message-queue-broker-cluster-with-a-glassfish-server-cluster"></a>Using a Message Queue Broker Cluster with a Eclipse GlassFish Cluster</h5>
<div class="paragraph">
<p>In EMBEDDED or LOCAL mode, when a Eclipse GlassFish is configured, a
Message Queue broker cluster is auto-configured with each Eclipse GlassFish instance associated with a Message Queue broker instance.</p>
</div>
<div class="paragraph">
<p>In REMOTE mode, to configure a Eclipse GlassFish cluster to use a Message
Queue broker cluster, add all the Message Queue brokers as JMS hosts in
the Eclipse GlassFish&#8217;s Java Message Service. Any JMS connection
factories created and MDBs deployed then uses the JMS configuration specified.</p>
</div>
</div>
<div class="sect4">
<h5 id="specifying-an-application-specific-message-queue-broker-cluster"><a class="anchor" href="#specifying-an-application-specific-message-queue-broker-cluster"></a>Specifying an Application-Specific Message Queue Broker Cluster</h5>
<div class="paragraph">
<p>In some cases, an application may need to use a different Message Queue
broker cluster than the one used by the Eclipse GlassFish cluster. To do
so, use the <code>AddressList</code> property of a JMS connection factory or the
<code>activation-config</code> element in an MDB deployment descriptor to specify
the Message Queue broker cluster.</p>
</div>
<div class="paragraph">
<p>For more information about configuring connection factories, see
"<a href="administration-guide.html#administering-jms-connection-factories-and-destinations">Administering JMS Connection Factories and
Destinations</a>" in Eclipse GlassFish Administration
Guide. For more information about MDBs, see "<a href="application-development-guide.html#using-message-driven-beans">Using
Message-Driven Beans</a>" in Eclipse GlassFish
Application Development Guide.</p>
</div>
</div>
<div class="sect4">
<h5 id="application-clients"><a class="anchor" href="#application-clients"></a>Application Clients</h5>
<div class="paragraph">
<p>When an application client or standalone application accesses a JMS
administered object for the first time, the client JVM retrieves the
Java Message Service configuration from the server. Further changes to
the JMS service will not be available to the client JVM until it is restarted.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="checklist-for-deployment"><a class="anchor" href="#checklist-for-deployment"></a>3 Checklist for Deployment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix provides a checklist to get started on evaluation and
production with the Eclipse GlassFish.</p>
</div>
<div class="sect2">
<h3 id="checklist"><a class="anchor" href="#checklist"></a>Checklist</h3>
<div class="paragraph">
<p>Table 3-1 Checklist</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 23%;">
<col style="width: 77%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component/Feature</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Determine the following requirements for the application to be deployed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Required/acceptable response time.</p>
</li>
<li>
<p>Peak load characteristics.</p>
</li>
<li>
<p>Necessary persistence scope and frequency.</p>
</li>
<li>
<p>Session timeout in <code>web.xml</code>.</p>
</li>
<li>
<p>Failover and availability requirements.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information see the <a href="performance-tuning-guide.html#GSPTG">
Eclipse GlassFish Performance Tuning Guide</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hardware</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Have necessary amounts of hard disk space and memory installed.</p>
</li>
<li>
<p>Use the sizing exercise to identify the requirements for deployment.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information see the <a href="release-notes.html#GSRLN">Eclipse GlassFish Release Notes</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operating System</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Ensure that the product is installed on a supported platform.</p>
</li>
<li>
<p>Ensure that the patch levels are up-to-date and accurate.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information see the <a href="release-notes.html#GSRLN">Eclipse GlassFish Release Notes</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network Infrastructure</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Identify single points of failures and address them.</p>
</li>
<li>
<p>Make sure that the NICs and other network components are correctly configured.</p>
</li>
<li>
<p>Run <code>ttcp</code> benchmark test to determine if the throughput meets the requirements/expected result.</p>
</li>
<li>
<p>Setup <code>ssh</code> based your preference.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information see the <a href="installation-guide.html#GSING">Eclipse GlassFish Installation Guide</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Back-ends and other external data sources</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check with the domain expert or vendor to ensure that these data sources
are configured appropriately.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">System Changes/Configuration</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Make sure that changes to <code>/etc/system</code> and its equivalent on Linux
are completed before running any performance/stress tests.</p>
</li>
<li>
<p>Make sure the changes to the TCP/IP settings are complete.</p>
</li>
<li>
<p>By default, the system comes with lots of services pre-configured. Not
all of them are required to be running. Turn off services that are not
needed to conserve system resources.</p>
</li>
<li>
<p>On Solaris, use <code>Setoolkit</code> to determine the behavior of the system.
Resolve any flags that show up.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information see the <a href="performance-tuning-guide.html#GSPTG">Eclipse GlassFish Performance Tuning Guide</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installation</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Ensure that these servers are not installed on NFS mounted volumes.</p>
</li>
<li>
<p>Check for enough disk space and RAM when installing Eclipse GlassFish.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eclipse GlassFish Configuration</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Enable access log rotation.</p>
</li>
<li>
<p>Choose the right logging level. WARNING is usually appropriate.</p>
</li>
<li>
<p>Configure Jakarta EE containers using the Administration Console.</p>
</li>
<li>
<p>Configure HTTP listeners using the Administration Console.</p>
</li>
<li>
<p>Configure ORB threadpool using the Administration Console.</p>
</li>
<li>
<p>Ensure that the appropriate persistence scope and frequency are used
and they are not overridden underneath in the individual Web/EJB modules.</p>
</li>
<li>
<p>Ensure that only critical methods in the SFSB are checkpointed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on tuning, see the <a href="performance-tuning-guide.html#GSPTG">Eclipse GlassFish Performance Tuning Guide</a>.</p>
</div>
<div class="paragraph">
<p>For more information on configuration, see the <a href="administration-guide.html#GSADG">Eclipse GlassFish Administration Guide</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Load balancer Configuration</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Make sure the load balancer have network access to the Server.</p>
</li>
<li>
<p>See documentation of your load balancer and verify that the configuration
of the load balancer is correct.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuring usual attributes of load balancing algorithm</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Endpoint - Address or host and port used for checks generating minimal
possible load.</p>
</li>
<li>
<p>Response-time-out-in-seconds - How long the load balancer waits before
declaring a Eclipse GlassFish instance unhealthy. Set this value based on
the response time of the application. If set too high, the Web Server
and load balancer plug-in wait a long time before marking a Eclipse GlassFish
instance as unhealthy. If set too low and Eclipse GlassFish&#8217;s
response time crosses this threshold, the instance will be incorrectly
marked as unhealthy.</p>
</li>
<li>
<p>Interval-in-seconds - Time in seconds after which unhealthy instances
are checked to find out if they have returned to a healthy state.
Too low a value generates extra traffic from the load balancer plug-in to
Eclipse GlassFish instances and too high a value delays the routing of
requests to the instance that has turned healthy.</p>
</li>
<li>
<p>Timeout-in-seconds - Duration for a response to be obtained for a
health check request. Adjust this value based on the traffic among the
systems in the cluster to ensure that the health check succeeds.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuring time-outs in Eclipse GlassFish</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Max-wait-time-millis - Wait time to get a connection from the pool
before throwing an exception. Default is 6 s. Consider changing this
value for highly loaded systems where the size of the data being
persisted is greater than 50 KB.</p>
</li>
<li>
<p>Cache-idle-timeout-in-seconds - Time an EJB is allowed to be idle in
the cache before it gets passivated. Applies only to entity beans and
stateful session beans.</p>
</li>
<li>
<p>Removal-timeout-in-seconds - Time that an EJB remains passivated (idle
in the backup store). Default value is 60 minutes. Adjust this value
based on the need for SFSB failover.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Virtual Machine Configuration</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Initially set the minimum and maximum heap sizes to be the same, and
at least one GB for each instance.</p>
</li>
<li>
<p>When running multiple instances of Eclipse GlassFish, consider creating
a processor set and bind Eclipse GlassFish to it. This helps in cases
where the CMS collector is used to sweep the old generation.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-03-22 21:15:48 UTC
</div>
</div>
</body>
</html>